<Project Sdk="Microsoft.NET.Sdk">

    <Import Project="..\TestProject.props" />

    <PropertyGroup>
        <JsonSerializerIsReflectionEnabledByDefault>false</JsonSerializerIsReflectionEnabledByDefault>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Aot)' == 'true' and $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net8.0'))">
        <IsAotCompatible>true</IsAotCompatible>
        <PublishAot>true</PublishAot>
        <PublishTrimmed>true</PublishTrimmed>
        <AotMsCodeCoverageInstrumentation>true</AotMsCodeCoverageInstrumentation>
    </PropertyGroup>

    <PropertyGroup Condition="'$(SingleFile)' == 'true' and $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net8.0'))">
        <UseAppHost>true</UseAppHost>
        <PublishSingleFile>true</PublishSingleFile>
        <SelfContained>true</SelfContained>
        <PublishTrimmed>true</PublishTrimmed>
        <SingleFileMsCodeCoverageInstrumentation>true</SingleFileMsCodeCoverageInstrumentation>
    </PropertyGroup>

    <ItemGroup Condition="'$(SingleFile)' != 'true' and '$(Aot)' != 'true'">
        <PackageReference Include="Microsoft.Testing.Extensions.CodeCoverage" />
    </ItemGroup>

    <ItemGroup>
        <PackageReference Include="AutoFixture" />
        <PackageReference Include="coverlet.collector" />
        <PackageReference Include="Microsoft.Testing.Extensions.CrashDump" />
        <PackageReference Include="Microsoft.Testing.Extensions.HangDump" />
        <PackageReference Include="OneOf" />
        <PackageReference Include="OneOf.SourceGenerator" />
        <PackageReference Include="RandomDataGenerator.Net" />
        <PackageReference Include="Shouldly" />
        <PackageReference Include="Humanizer" />
        <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
        <PackageReference Include="Microsoft.Testing.Extensions.TrxReport" />
        <PackageReference Include="Polly" />
        <PackageReference Include="Vogen" />
    </ItemGroup>
    <ItemGroup>
        <ProjectReference Include="..\TUnit.TestProject.Library\TUnit.TestProject.Library.csproj" />
        <ProjectReference Include="..\TUnit\TUnit.csproj" />
    </ItemGroup>

    <ItemGroup>
        <None Update="Data\Blah.txt">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
        <None Update="Data\Zip.zip">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
        <None Update="testconfig.json">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
        <None Remove="TestSessionAfterTestsb7e72d6a41f342238b9e690f28e8d99d.txt" />
        <None Remove="e2f50fb55cd948be9544a911b401fa0e-AfterTestAttributeTests.txt" />
        <None Remove="d8d11a8ce597411bbe6505b53ac4bba1-AfterTestAttributeTests.txt" />
        <None Remove="c97a2073a10247689fa1fdcaedfafd74-AfterTestAttributeTests.txt" />
        <None Remove="c452ab83841a420e90782a34bc1a96f6-AfterTestAttributeTests.txt" />
        <None Remove="b93a114287324139a5f1bc58fa840240-AfterTestAttributeTests.txt" />
        <None Remove="9e6dd33bed9849eea292a2836f0955b2-AfterTestAttributeTests.txt" />
        <None Remove="97005a19636c4a48b29a47b86e7f4e86-AfterTestAttributeTests.txt" />
        <None Remove="4ad4e031bb64493193ba3efec36417e5-AfterTestAttributeTests.txt" />
        <None Remove="49aee1b9857e423ea8c3518481e28e55-AfterTestAttributeTests.txt" />
        <None Remove="4618bc4530e442509ab8ea8db5df2286-AfterTestAttributeTests.txt" />
        <None Remove="44af63b09d9241fc8cb5cbf1afb0ecaa-AfterTestAttributeTests.txt" />
        <None Remove="40fcf458d40b4b8ab43588be67cc3fff-AfterTestAttributeTests.txt" />
        <None Remove="1b71e9d1f6dd4c4c83a2612f36090e76-AfterTestAttributeTests.txt" />
        <None Remove="1570083403674ffebd9c1530c844552d-AfterTestAttributeTests.txt" />
        <None Remove="02e8f430c5764d3ca67328562d2da5d2-AfterTestAttributeTests.txt" />
        <None Remove="02280a3165c04e308ec0757321e61677-AfterTestAttributeTests.txt" />
        <None Remove="0147f666bbd746038b423eb75736d989-AfterTestAttributeTests.txt" />
    </ItemGroup>

    <Import Project="..\TestProject.targets" />

</Project>
