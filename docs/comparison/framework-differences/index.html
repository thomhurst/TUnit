<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-comparison/framework-differences" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Framework Differences | TUnit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tunit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tunit.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tunit.dev/docs/comparison/framework-differences"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Framework Differences | TUnit"><meta data-rh="true" name="description" content="TUnit is inspired by NUnit and xUnit, and first and foremost I want to say that these are amazing frameworks and no hate to them."><meta data-rh="true" property="og:description" content="TUnit is inspired by NUnit and xUnit, and first and foremost I want to say that these are amazing frameworks and no hate to them."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tunit.dev/docs/comparison/framework-differences"><link data-rh="true" rel="alternate" href="https://tunit.dev/docs/comparison/framework-differences" hreflang="en"><link data-rh="true" rel="alternate" href="https://tunit.dev/docs/comparison/framework-differences" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RLNKZO4OTO-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Framework Differences","item":"https://tunit.dev/docs/comparison/framework-differences"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="TUnit" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.81482573.css">
<script src="/assets/js/runtime~main.4c5012a6.js" defer="defer"></script>
<script src="/assets/js/main.8d2a7882.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/lab.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lab.svg" alt="TUnit Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/lab.svg" alt="TUnit Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TUnit</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a href="https://github.com/thomhurst/TUnit/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" left="left">Issues<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/thomhurst/TUnit/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" left="left">Discussions<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://www.nuget.org/packages/TUnit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">NuGet<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/thomhurst/TUnit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/test-authoring/things-to-know">Test Authoring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/assertions/awaiting">Assertions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/test-lifecycle/setup">Test Lifecycle</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/execution/retrying">Execution Control</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/parallelism/not-in-parallel">Parallelism Control</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/extensions/">Customization &amp; Extensibility</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/examples/intro">Examples &amp; Use Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/comparison/framework-differences">Reference</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/comparison/framework-differences">Framework Differences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/comparison/attributes">Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/test-configuration">Test Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/migration/xunit">Migration Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/experimental/dynamic-tests">Experimental Features</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Framework Differences</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Framework Differences</h1></header>
<p>TUnit is inspired by NUnit and xUnit, and first and foremost I want to say that these are amazing frameworks and no hate to them.</p>
<p><strong>Why use TUnit?</strong><br>
<!-- -->TUnit aims to address some pain points and limitations found in other frameworks, especially around parallelism, lifecycle hooks, test isolation, and extensibility.<br>
<!-- -->Below are some scenarios where TUnit offers a different or improved approach.</p>
<p>So you&#x27;ll be asking why use TUnit instead of them, right?
Here are some things I&#x27;ve stumbled across in the past that I&#x27;ve found limiting when writing a test suite.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="xunit">xUnit<a href="#xunit" class="hash-link" aria-label="Direct link to xUnit" title="Direct link to xUnit">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async-tests-parallel-limit">Async tests parallel limit<a href="#async-tests-parallel-limit" class="hash-link" aria-label="Direct link to Async tests parallel limit" title="Direct link to Async tests parallel limit">​</a></h3>
<p>xUnit gives you a way to limit the &#x27;thread count&#x27; - but this doesn&#x27;t map 1-to-1 to async tests. 1 thread can run multiple async tests when they yield, and that means limiting the thread count doesn&#x27;t limit the test count. This can be problematic in certain scenarios. For example, running UI tests, you might want to limit the number of concurrent tests because spawning up too many browser instances overwhelms your system. With TUnit, you can pass in a CLI flag to limit the number of concurrent tests: <code>--maximum-parallel-tests 8</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-and-tear-downs">Set up and tear downs<a href="#set-up-and-tear-downs" class="hash-link" aria-label="Direct link to Set up and tear downs" title="Direct link to Set up and tear downs">​</a></h3>
<p>Set ups and tear-downs work largely off of constructors and the <code>IDisposable</code> interface (TUnit can do this too if you like this pattern). If you have async requirements, you can implement an <code>IAsyncLifetime</code> interface. While some people like this approach as its familiar, things get messier when your classes rely on inheritance. If your base class uses these interfaces, you have to then hide the base members, implement your version, and then call the base method manually. Also with tear downs, if you want to guarantee execution of multiple pieces of code, you can&#x27;t implement the interface multiple times. So you end up having to do lots of try/catches. In TUnit, you can declare multiple methods with <code>[After(Test)]</code> attributes, and they are all guaranteed to run, even if a previous one failed. And it&#x27;ll lazily aggregate and throw any exceptions after they&#x27;ve all run. On top of this, any set ups and tear downs are collected all the way down to the base class, and run in an order than means members are initialised and cleaned up that makes sense:</p>
<ul>
<li>For set ups, that means base set up methods are run first, and then the subsequent inherited class&#x27;s methods</li>
<li>For clean ups, the top most clean ups are run first, and then the subsequent base methods</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assembly-level-hooks">Assembly level hooks<a href="#assembly-level-hooks" class="hash-link" aria-label="Direct link to Assembly level hooks" title="Direct link to Assembly level hooks">​</a></h3>
<p>There isn&#x27;t a simplistic way to do something on starting an assembly&#x27;s tests. For example, we might want to spin up 1 in-memory server to run some tests against. TUnit supports this with a simple static class, with a method containing the attribute <code>[Before(Assembly)]</code>. Tear down is as simple as another method with <code>[After(Assembly)]</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testcontext">TestContext<a href="#testcontext" class="hash-link" aria-label="Direct link to TestContext" title="Direct link to TestContext">​</a></h3>
<p>Sometimes we want to access information about the state of a test. For example, when running UI tests, I like to take a screenshot on a test failure, so I can more easily see what went wrong. xUnit does not have a native way of determining if a test failed when you&#x27;re in a tear down method. With TUnit, you can inject in a <code>TestContext</code> object into your tear down method, or you can call the static <code>TestContext.Current</code> static method.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assertions">Assertions<a href="#assertions" class="hash-link" aria-label="Direct link to Assertions" title="Direct link to Assertions">​</a></h3>
<p>xUnit assertions are fairly basic and have the problem of it being unclear which argument goes in which position, without sifting through intellisense/documentation.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> one </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Assert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Equal</span><span class="token return-type class-name punctuation" style="color:#393A34">(</span><span class="token return-type class-name">1</span><span class="token return-type class-name punctuation" style="color:#393A34">,</span><span class="token return-type class-name"> one</span><span class="token return-type class-name punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Assert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Equal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">one</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nunit">NUnit<a href="#nunit" class="hash-link" aria-label="Direct link to NUnit" title="Direct link to NUnit">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared-test-class-instances">Shared test class instances<a href="#shared-test-class-instances" class="hash-link" aria-label="Direct link to Shared test class instances" title="Direct link to Shared test class instances">​</a></h3>
<p>This one has bitten me so many times, and I&#x27;ve seen it bite many others too. And a lot of people don&#x27;t even know it. But the default behaviour of NUnit is to run all your tests within a class, against a single instance of that class. That means if you&#x27;re storing state in fields/properties, they&#x27;re going to be left over from previous tests.
This is what I call leaky test states, and I am firmly against it. Tests should be isolated from one another and really unable to affect one another. So TUnit by design runs every test against a new instance, and there is no way to change that because I consider it bad practice. If you want to share state in a field, then that&#x27;s entirely possible by making it <code>static</code>. By utilising the language instead, it makes it clear to anyone reading it whether multiple tests can access that.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-properties-based-off-of-dynamically-injected-data">Setting properties based off of dynamically injected data<a href="#setting-properties-based-off-of-dynamically-injected-data" class="hash-link" aria-label="Direct link to Setting properties based off of dynamically injected data" title="Direct link to Setting properties based off of dynamically injected data">​</a></h3>
<p>I had a scenario in a multi-tenanted test suite where tests tests were repeated with different tenants injected in.
Like this:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">TestFixtureSource</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments keyword" style="color:#00009f">typeof</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments type-expression class-name">Tenant</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">,</span><span class="token attribute attribute-arguments"> </span><span class="token attribute attribute-arguments keyword" style="color:#00009f">nameof</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments">Tenant</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">.</span><span class="token attribute attribute-arguments">AllTenants</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyTests</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Tenant</span><span class="token plain"> tenant</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">Test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Test1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>With this, I wanted to be able to filter by the tenant. So I tried using a custom attribute with <code>IApplyToTest</code> and setting a property based on the constructor argument. This didn&#x27;t work. I think they&#x27;re enumerated upon starting, and so you can&#x27;t set this up beforehand. With TUnit, tests are enumerated and initialised via source-generation so this is all done up-front. So I could set a property in TUnit with an attribute with <code>ITestDiscoveryEvent</code>, set a property based constructor arguments, and then run <code>dotnet run --treenode-filter /*/*/*/*[Tenant=MyTenant]</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assembly--class-level-attributes">Assembly &amp; class level attributes<a href="#assembly--class-level-attributes" class="hash-link" aria-label="Direct link to Assembly &amp; class level attributes" title="Direct link to Assembly &amp; class level attributes">​</a></h3>
<p>Want to use the <code>[Repeat]</code> or <code>[Retry]</code> attributes on a class? Or even an assembly? You can&#x27;t. They&#x27;re only supported for test methods. With TUnit, most attributes are supported at Test, Class &amp; Assembly levels. Test takes the highest priority, then class, then assembly. So you could set defaults with an assembly/class attribute, and then override it for certain tests by setting that same attribute on the test.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assertions-1">Assertions<a href="#assertions-1" class="hash-link" aria-label="Direct link to Assertions" title="Direct link to Assertions">​</a></h3>
<p>NUnit assertions largely influenced the way that TUnit assertions work. However, NUnit assertions do not have compile time checks. I could check if a string is negative (<code>NUnitAssert.That(&quot;String&quot;, Is.Negative);</code>) or if a boolean throws an exception (<code>NUnitAssert.That(true, Throws.ArgumentException);</code>). These assertions don&#x27;t make sense. There are analyzers to help catch these - But they will compile if these analyzers aren&#x27;t run. TUnit assertions are built with the type system in mind (where possible!). Specific assertions are built via extensions to the relevant types, and not in a generic sense that could apply to anything. That means when you&#x27;re using intellisense to see what methods you have available, you should only see assertions that are relevant for your type. This makes it harder to make mistakes, and decreases your feedback loop time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-generated--native-aot-support--single-file-support">Source generated + Native AOT Support + Single File Support<a href="#source-generated--native-aot-support--single-file-support" class="hash-link" aria-label="Direct link to Source generated + Native AOT Support + Single File Support" title="Direct link to Source generated + Native AOT Support + Single File Support">​</a></h3>
<p>As mentioned, TUnit is source generated. This should mean things are fast. And you can check out the generated code yourself! Because tests are source generated and not scanned via reflection, this means you can build your test projects using Native AOT or as a Single File application - Something that you can&#x27;t current do with NUnit or xUnit.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="more-lifecycle-hooks">More lifecycle hooks<a href="#more-lifecycle-hooks" class="hash-link" aria-label="Direct link to More lifecycle hooks" title="Direct link to More lifecycle hooks">​</a></h3>
<p>TUnit has tried to make it easy to hook into a range of lifecycles.
The attributes you can use on your hook methods are:</p>
<ul>
<li>
<p><code>[Before(Test)]</code> - Run before every test in the class it&#x27;s defined in</p>
</li>
<li>
<p><code>[After(Test)]</code> - Run after every test in the class it&#x27;s defined in</p>
</li>
<li>
<p><code>[Before(Class)]</code> - Run once before all tests in the class it&#x27;s defined in</p>
</li>
<li>
<p><code>[After(Class)]</code> - Run once after all tests in the class it&#x27;s defined in</p>
</li>
<li>
<p><code>[Before(Assembly)]</code> - Run once before all tests in the assembly it&#x27;s defined in</p>
</li>
<li>
<p><code>[After(Assembly)]</code> - Run once after all tests in the assembly it&#x27;s defined in</p>
</li>
<li>
<p><code>[Before(TestSession)]</code> - Run once before all tests in the test run</p>
</li>
<li>
<p><code>[After(TestSession)]</code> - Run once after all tests in the test run</p>
</li>
<li>
<p><code>[Before(TestDiscovery)]</code> - Run once before any tests are discovered</p>
</li>
<li>
<p><code>[After(TestDiscovery)]</code> - Run once after all tests are discovered</p>
</li>
<li>
<p><code>[BeforeEvery(Test)]</code> - Run before every test in the test run</p>
</li>
<li>
<p><code>[AfterEvery(Test)]</code> - Run after every test in the test run</p>
</li>
<li>
<p><code>[BeforeEvery(Class)]</code> - Run before the first test in every class in the test run</p>
</li>
<li>
<p><code>[AfterEvery(Class)]</code> - Run after the last test in every class in the test run</p>
</li>
<li>
<p><code>[BeforeEvery(Assembly)]</code> - Run before the first test in every assembly in the test run</p>
</li>
<li>
<p><code>[AfterEvery(Assembly)]</code> - Run after the last test in every assembly in the test run</p>
</li>
</ul>
<p>And all those hooks allow injecting in a relevant <code>[HookType]Context</code> object - So you can interrogate it for information about the test run so far. Hopefully meeting the needs of most users!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-dependencies">Test dependencies<a href="#test-dependencies" class="hash-link" aria-label="Direct link to Test dependencies" title="Direct link to Test dependencies">​</a></h3>
<p>Got tests that require another test to execute first?
In other frameworks it usually involves turning off parallelisation, then setting an <code>[Order]</code> attribute with 1, 2, 3, etc.
In TUnit, you can use a <code>[DependsOn(...)]</code> attribute. That test will wait to start, only once its dependencies have finished. And you don&#x27;t have to turn off parallelisation of other tests!</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">Test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Test1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">Test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Test2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">Test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">DependsOn</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments keyword" style="color:#00009f">nameof</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments">Test1</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">DependsOn</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments keyword" style="color:#00009f">nameof</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">(</span><span class="token attribute attribute-arguments">Test2</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token attribute attribute-arguments punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Test3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token range operator" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="class-arguments">Class Arguments<a href="#class-arguments" class="hash-link" aria-label="Direct link to Class Arguments" title="Direct link to Class Arguments">​</a></h3>
<p>A lot of the data injection mechanisms in xUnit/NUnit work for the method, or the class, and not vice-versa. With TUnit, you can use <code>[Arguments(...)]</code> or <code>[Matrix(...)]</code> or <code>[MethodDataSource(...)]</code> etc. for both classes and test methods, making it super flexible!</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/examples/filebased-csharp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">File based C# application</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/comparison/attributes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Attributes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xunit" class="table-of-contents__link toc-highlight">xUnit</a><ul><li><a href="#async-tests-parallel-limit" class="table-of-contents__link toc-highlight">Async tests parallel limit</a></li><li><a href="#set-up-and-tear-downs" class="table-of-contents__link toc-highlight">Set up and tear downs</a></li><li><a href="#assembly-level-hooks" class="table-of-contents__link toc-highlight">Assembly level hooks</a></li><li><a href="#testcontext" class="table-of-contents__link toc-highlight">TestContext</a></li><li><a href="#assertions" class="table-of-contents__link toc-highlight">Assertions</a></li></ul></li><li><a href="#nunit" class="table-of-contents__link toc-highlight">NUnit</a><ul><li><a href="#shared-test-class-instances" class="table-of-contents__link toc-highlight">Shared test class instances</a></li><li><a href="#setting-properties-based-off-of-dynamically-injected-data" class="table-of-contents__link toc-highlight">Setting properties based off of dynamically injected data</a></li><li><a href="#assembly--class-level-attributes" class="table-of-contents__link toc-highlight">Assembly &amp; class level attributes</a></li><li><a href="#assertions-1" class="table-of-contents__link toc-highlight">Assertions</a></li></ul></li><li><a href="#other" class="table-of-contents__link toc-highlight">Other</a><ul><li><a href="#source-generated--native-aot-support--single-file-support" class="table-of-contents__link toc-highlight">Source generated + Native AOT Support + Single File Support</a></li><li><a href="#more-lifecycle-hooks" class="table-of-contents__link toc-highlight">More lifecycle hooks</a></li><li><a href="#test-dependencies" class="table-of-contents__link toc-highlight">Test dependencies</a></li><li><a href="#class-arguments" class="table-of-contents__link toc-highlight">Class Arguments</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/tunit" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/thomhurst/TUnit/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/thomhurst/TUnit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nuget.org/packages/TUnit" target="_blank" rel="noopener noreferrer" class="footer__link-item">NuGet<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Tom Longhurst. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>