"use strict";(globalThis.webpackChunktunit_docs_site=globalThis.webpackChunktunit_docs_site||[]).push([[9332],{56917(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"test-authoring/mocking/index","title":"TUnit.Mocks","description":"TUnit.Mocks is a source-generated, AOT-compatible mocking framework built for TUnit. Because mocks are generated at compile time, it works with Native AOT, trimming, and single-file publishing \u2014 unlike traditional mocking libraries that rely on runtime proxy generation.","source":"@site/docs/test-authoring/mocking/index.md","sourceDirName":"test-authoring/mocking","slug":"/test-authoring/mocking/","permalink":"/docs/test-authoring/mocking/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Depends On","permalink":"/docs/test-authoring/depends-on"},"next":{"title":"Setup & Stubbing","permalink":"/docs/test-authoring/mocking/setup"}}');var s=r(74848),i=r(28453);const c={sidebar_position:1},o="TUnit.Mocks",d={},l=[{value:"Installation",id:"installation",level:2},{value:"Your First Mock",id:"your-first-mock",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Creating Mocks",id:"creating-mocks",level:3},{value:"The Mock Wrapper",id:"the-mock-wrapper",level:3},{value:"Implicit Conversion",id:"implicit-conversion",level:3},{value:"Loose vs Strict Mode",id:"loose-vs-strict-mode",level:3},{value:"What&#39;s Next",id:"whats-next",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"tunitmocks",children:"TUnit.Mocks"})}),"\n",(0,s.jsxs)(n.p,{children:["TUnit.Mocks is a ",(0,s.jsx)(n.strong,{children:"source-generated, AOT-compatible"})," mocking framework built for TUnit. Because mocks are generated at compile time, it works with Native AOT, trimming, and single-file publishing \u2014 unlike traditional mocking libraries that rely on runtime proxy generation."]}),"\n",(0,s.jsx)(n.admonition,{title:"Beta",type:"note",children:(0,s.jsxs)(n.p,{children:["TUnit.Mocks is currently in ",(0,s.jsx)(n.strong,{children:"beta"}),". The API may change before the stable release."]})}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"Add the NuGet package to your test project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package TUnit.Mocks --prerelease\n"})}),"\n",(0,s.jsx)(n.p,{children:"For HTTP mocking or logging helpers, also add:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package TUnit.Mocks.Http --prerelease\ndotnet add package TUnit.Mocks.Logging --prerelease\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"C# 14 Required",type:"warning",children:(0,s.jsxs)(n.p,{children:["TUnit.Mocks requires ",(0,s.jsx)(n.strong,{children:"C# 14"})," or later (",(0,s.jsx)(n.code,{children:"LangVersion"})," set to ",(0,s.jsx)(n.code,{children:"14"})," or ",(0,s.jsx)(n.code,{children:"preview"}),"). If your project targets an older version, you will see error ",(0,s.jsx)(n.strong,{children:"TM004"})," at compile time."]})}),"\n",(0,s.jsx)(n.h2,{id:"your-first-mock",children:"Your First Mock"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using TUnit.Mocks;\n\npublic interface IGreeter\n{\n    string Greet(string name);\n}\n\npublic class GreeterTests\n{\n    [Test]\n    public async Task Greet_Returns_Configured_Value()\n    {\n        // Arrange \u2014 create a mock\n        var mock = Mock.Of<IGreeter>();\n\n        // Configure \u2014 set up a return value\n        mock.Setup.Greet(Arg.Any<string>()).Returns("Hello!");\n\n        // Act \u2014 use the mock object\n        IGreeter greeter = mock.Object;\n        var result = greeter.Greet("Alice");\n\n        // Assert \u2014 verify the result and the call\n        await Assert.That(result).IsEqualTo("Hello!");\n        mock.Verify.Greet("Alice").WasCalled(Times.Once);\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"creating-mocks",children:"Creating Mocks"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Factory Method"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.Of<T>()"})}),(0,s.jsx)(n.td,{children:"Mock an interface or abstract class"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.OfPartial<T>(args)"})}),(0,s.jsx)(n.td,{children:"Mock a concrete class (calls base for unconfigured methods)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.OfDelegate<T>()"})}),(0,s.jsxs)(n.td,{children:["Mock a delegate (",(0,s.jsx)(n.code,{children:"Func<>"}),", ",(0,s.jsx)(n.code,{children:"Action<>"}),", etc.)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.Wrap<T>(instance)"})}),(0,s.jsx)(n.td,{children:"Wrap a real object with selective overrides"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.Of<T1, T2>()"})}),(0,s.jsx)(n.td,{children:"Mock multiple interfaces on a single object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.HttpHandler()"})}),(0,s.jsxs)(n.td,{children:["Create a ",(0,s.jsx)(n.code,{children:"MockHttpHandler"})," ",(0,s.jsxs)(n.em,{children:["(requires ",(0,s.jsx)(n.code,{children:"TUnit.Mocks.Http"}),")"]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.HttpClient(baseAddress?)"})}),(0,s.jsxs)(n.td,{children:["Create a ",(0,s.jsx)(n.code,{children:"MockHttpClient"})," \u2014 an ",(0,s.jsx)(n.code,{children:"HttpClient"})," with a ",(0,s.jsx)(n.code,{children:".Handler"})," property ",(0,s.jsxs)(n.em,{children:["(requires ",(0,s.jsx)(n.code,{children:"TUnit.Mocks.Http"}),")"]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.Logger()"})}),(0,s.jsxs)(n.td,{children:["Create a ",(0,s.jsx)(n.code,{children:"MockLogger"})," ",(0,s.jsxs)(n.em,{children:["(requires ",(0,s.jsx)(n.code,{children:"TUnit.Mocks.Logging"}),")"]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Mock.Logger<T>()"})}),(0,s.jsxs)(n.td,{children:["Create a ",(0,s.jsx)(n.code,{children:"MockLogger<T>"})," implementing ",(0,s.jsx)(n.code,{children:"ILogger<T>"})," ",(0,s.jsxs)(n.em,{children:["(requires ",(0,s.jsx)(n.code,{children:"TUnit.Mocks.Logging"}),")"]})]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["All factory methods accept an optional ",(0,s.jsx)(n.code,{children:"MockBehavior"})," parameter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var loose = Mock.Of<IService>();                       // loose (default)\nvar strict = Mock.Of<IService>(MockBehavior.Strict);   // throws on unconfigured calls\n"})}),"\n",(0,s.jsx)(n.h3,{id:"the-mock-wrapper",children:"The Mock Wrapper"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Mock.Of<T>()"})," returns a ",(0,s.jsx)(n.code,{children:"Mock<T>"})," wrapper with three surfaces:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var mock = Mock.Of<IService>();\n\nmock.Setup   // configure method/property behaviors\nmock.Verify  // verify calls were made\nmock.Raise   // raise events (if T has events)\nmock.Object  // the T instance to pass to your code under test\n"})}),"\n",(0,s.jsx)(n.h3,{id:"implicit-conversion",children:"Implicit Conversion"}),"\n",(0,s.jsxs)(n.p,{children:["You can pass ",(0,s.jsx)(n.code,{children:"Mock<T>"})," directly where ",(0,s.jsx)(n.code,{children:"T"})," is expected \u2014 no ",(0,s.jsx)(n.code,{children:".Object"})," needed:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var mock = Mock.Of<IGreeter>();\nIGreeter greeter = mock; // implicit conversion\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loose-vs-strict-mode",children:"Loose vs Strict Mode"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Mode"}),(0,s.jsx)(n.th,{children:"Unconfigured methods"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MockBehavior.Loose"})}),(0,s.jsxs)(n.td,{children:["Return smart defaults (",(0,s.jsx)(n.code,{children:"0"}),", ",(0,s.jsx)(n.code,{children:'""'}),", ",(0,s.jsx)(n.code,{children:"false"}),", ",(0,s.jsx)(n.code,{children:"null"}),", auto-mocked interfaces)"]}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MockBehavior.Strict"})}),(0,s.jsxs)(n.td,{children:["Throw ",(0,s.jsx)(n.code,{children:"MockStrictBehaviorException"})]}),(0,s.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"setup",children:"Setup & Stubbing"})," \u2014 configure return values, callbacks, exceptions, and property behaviors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"verification",children:"Verification"})," \u2014 verify calls, ordering, and assertion integration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"argument-matchers",children:"Argument Matchers"})," \u2014 match arguments with predicates, patterns, and capture values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"advanced",children:"Advanced Features"})," \u2014 state machines, events, auto-mocking, diagnostics, and more"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"http",children:"HTTP Mocking"})," \u2014 mock ",(0,s.jsx)(n.code,{children:"HttpClient"})," with ",(0,s.jsx)(n.code,{children:"MockHttpHandler"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"logging",children:"Logging"})," \u2014 capture and verify ",(0,s.jsx)(n.code,{children:"ILogger"})," calls with ",(0,s.jsx)(n.code,{children:"MockLogger"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453(e,n,r){r.d(n,{R:()=>c,x:()=>o});var t=r(96540);const s={},i=t.createContext(s);function c(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);