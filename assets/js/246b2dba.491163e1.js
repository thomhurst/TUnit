"use strict";(globalThis.webpackChunktunit_docs_site=globalThis.webpackChunktunit_docs_site||[]).push([[5752],{93962(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"test-authoring/mocking/argument-matchers","title":"Argument Matchers","description":"Argument matchers control which calls a setup or verification matches. They are used in both mock.Setup and mock.Verify surfaces.","source":"@site/docs/test-authoring/mocking/argument-matchers.md","sourceDirName":"test-authoring/mocking","slug":"/test-authoring/mocking/argument-matchers","permalink":"/docs/test-authoring/mocking/argument-matchers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docs","previous":{"title":"Verification","permalink":"/docs/test-authoring/mocking/verification"},"next":{"title":"Advanced Features","permalink":"/docs/test-authoring/mocking/advanced"}}');var r=s(74848),c=s(28453);const i={sidebar_position:4},a="Argument Matchers",l={},d=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"Basic Matchers",id:"basic-matchers",level:2},{value:"Any",id:"any",level:3},{value:"Exact Value",id:"exact-value",level:3},{value:"Predicate",id:"predicate",level:3},{value:"Null and NotNull",id:"null-and-notnull",level:3},{value:"String Matchers",id:"string-matchers",level:2},{value:"Regex Pattern",id:"regex-pattern",level:3},{value:"Compiled Regex",id:"compiled-regex",level:3},{value:"Collection Matchers",id:"collection-matchers",level:2},{value:"Contains",id:"contains",level:3},{value:"HasCount",id:"hascount",level:3},{value:"IsEmpty",id:"isempty",level:3},{value:"SequenceEquals",id:"sequenceequals",level:3},{value:"Range and Set Matchers",id:"range-and-set-matchers",level:2},{value:"IsInRange",id:"isinrange",level:3},{value:"IsIn / IsNotIn",id:"isin--isnotin",level:3},{value:"Negation",id:"negation",level:2},{value:"Argument Capture",id:"argument-capture",level:2},{value:"Custom Matchers",id:"custom-matchers",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"argument-matchers",children:"Argument Matchers"})}),"\n",(0,r.jsxs)(n.p,{children:["Argument matchers control which calls a setup or verification matches. They are used in both ",(0,r.jsx)(n.code,{children:"mock.Setup"})," and ",(0,r.jsx)(n.code,{children:"mock.Verify"})," surfaces."]}),"\n",(0,r.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Matcher"}),(0,r.jsx)(n.th,{children:"Matches"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Any<T>()"})}),(0,r.jsx)(n.td,{children:"Any value of type T (including null)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Is<T>(value)"})}),(0,r.jsx)(n.td,{children:"Exact equality"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Is<T>(predicate)"})}),(0,r.jsx)(n.td,{children:"Values satisfying a predicate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsNull<T>()"})}),(0,r.jsx)(n.td,{children:"Null only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsNotNull<T>()"})}),(0,r.jsx)(n.td,{children:"Any non-null value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Matches(pattern)"})}),(0,r.jsx)(n.td,{children:"String matching a regex pattern"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Matches(regex)"})}),(0,r.jsxs)(n.td,{children:["String matching a compiled ",(0,r.jsx)(n.code,{children:"Regex"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Contains<TCol, TElem>(item)"})}),(0,r.jsx)(n.td,{children:"Collection containing an element"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.HasCount<T>(n)"})}),(0,r.jsx)(n.td,{children:"Collection with exactly n elements"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsEmpty<T>()"})}),(0,r.jsx)(n.td,{children:"Empty collection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.SequenceEquals<TCol, TElem>(expected)"})}),(0,r.jsx)(n.td,{children:"Collection matching element-by-element"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsInRange<T>(min, max)"})}),(0,r.jsx)(n.td,{children:"Value within an inclusive range"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsIn<T>(values)"})}),(0,r.jsx)(n.td,{children:"Value in a set"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.IsNotIn<T>(values)"})}),(0,r.jsx)(n.td,{children:"Value not in a set"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Arg.Not<T>(inner)"})}),(0,r.jsx)(n.td,{children:"Negation of another matcher"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"basic-matchers",children:"Basic Matchers"}),"\n",(0,r.jsx)(n.h3,{id:"any",children:"Any"}),"\n",(0,r.jsx)(n.p,{children:"Matches any value, including null:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.GetUser(Arg.Any<int>()).Returns(new User("Default"));\n\nsvc.GetUser(1);    // matches\nsvc.GetUser(999);  // matches\n'})}),"\n",(0,r.jsx)(n.h3,{id:"exact-value",children:"Exact Value"}),"\n",(0,r.jsx)(n.p,{children:"Match a specific value using equality:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.GetUser(Arg.Is(42)).Returns(new User("Alice"));\nmock.Setup.GetUser(Arg.Is(99)).Returns(new User("Bob"));\n\nsvc.GetUser(42);  // returns Alice\nsvc.GetUser(99);  // returns Bob\nsvc.GetUser(1);   // no match \u2014 returns default\n'})}),"\n",(0,r.jsxs)(n.admonition,{title:"Implicit Conversion",type:"tip",children:[(0,r.jsxs)(n.p,{children:["Raw values are implicitly converted to ",(0,r.jsx)(n.code,{children:"Arg.Is(value)"}),", so these are equivalent:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.GetUser(Arg.Is(42)).Returns(new User("Alice"));\nmock.Setup.GetUser(42).Returns(new User("Alice")); // same thing\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"predicate",children:"Predicate"}),"\n",(0,r.jsx)(n.p,{children:"Match values satisfying a condition:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.GetUser(Arg.Is<int>(id => id > 0)).Returns(new User("Valid"));\nmock.Setup.GetUser(Arg.Is<int>(id => id <= 0)).Throws<ArgumentException>();\n'})}),"\n",(0,r.jsx)(n.h3,{id:"null-and-notnull",children:"Null and NotNull"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.Process(Arg.IsNull<string>()).Returns("was null");\nmock.Setup.Process(Arg.IsNotNull<string>()).Returns("had value");\n'})}),"\n",(0,r.jsx)(n.h2,{id:"string-matchers",children:"String Matchers"}),"\n",(0,r.jsx)(n.h3,{id:"regex-pattern",children:"Regex Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'// Match strings against a regex pattern\nmock.Setup.Search(Arg.Matches(@"^user_\\d+$")).Returns(new[] { "found" });\n\nsvc.Search("user_42");   // matches\nsvc.Search("admin_1");   // no match\n'})}),"\n",(0,r.jsx)(n.h3,{id:"compiled-regex",children:"Compiled Regex"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var pattern = new Regex(@"^user_\\d+$", RegexOptions.Compiled);\nmock.Setup.Search(Arg.Matches(pattern)).Returns(new[] { "found" });\n'})}),"\n",(0,r.jsx)(n.h2,{id:"collection-matchers",children:"Collection Matchers"}),"\n",(0,r.jsx)(n.h3,{id:"contains",children:"Contains"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"mock.Setup.ProcessItems(Arg.Contains<List<int>, int>(42)).Returns(true);\n\nsvc.ProcessItems(new List<int> { 1, 42, 3 }); // matches \u2014 contains 42\nsvc.ProcessItems(new List<int> { 1, 2, 3 });  // no match\n"})}),"\n",(0,r.jsx)(n.h3,{id:"hascount",children:"HasCount"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"mock.Setup.ProcessItems(Arg.HasCount<List<int>>(3)).Returns(true);\n\nsvc.ProcessItems(new List<int> { 1, 2, 3 }); // matches \u2014 count is 3\nsvc.ProcessItems(new List<int> { 1, 2 });     // no match\n"})}),"\n",(0,r.jsx)(n.h3,{id:"isempty",children:"IsEmpty"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"mock.Setup.ProcessItems(Arg.IsEmpty<List<int>>()).Returns(false);\n\nsvc.ProcessItems(new List<int>());          // matches\nsvc.ProcessItems(new List<int> { 1 });      // no match\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sequenceequals",children:"SequenceEquals"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"mock.Setup.ProcessItems(\n    Arg.SequenceEquals<List<int>, int>(new[] { 1, 2, 3 })\n).Returns(true);\n\nsvc.ProcessItems(new List<int> { 1, 2, 3 }); // matches\nsvc.ProcessItems(new List<int> { 3, 2, 1 }); // no match \u2014 wrong order\n"})}),"\n",(0,r.jsx)(n.h2,{id:"range-and-set-matchers",children:"Range and Set Matchers"}),"\n",(0,r.jsx)(n.h3,{id:"isinrange",children:"IsInRange"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"mock.Setup.SetAge(Arg.IsInRange(0, 120)).Returns(true);\n\nsvc.SetAge(25);   // matches\nsvc.SetAge(-1);   // no match\nsvc.SetAge(200);  // no match\n"})}),"\n",(0,r.jsx)(n.h3,{id:"isin--isnotin",children:"IsIn / IsNotIn"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.GetRole(Arg.IsIn("admin", "editor", "viewer")).Returns(true);\nmock.Setup.GetRole(Arg.IsNotIn("admin", "superadmin")).Returns(false);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"negation",children:"Negation"}),"\n",(0,r.jsxs)(n.p,{children:["Wrap any matcher with ",(0,r.jsx)(n.code,{children:"Not"})," to invert it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'mock.Setup.Process(Arg.Not(Arg.Is(0))).Returns("non-zero");\n// Matches any int except 0\n'})}),"\n",(0,r.jsx)(n.h2,{id:"argument-capture",children:"Argument Capture"}),"\n",(0,r.jsxs)(n.p,{children:["Every ",(0,r.jsx)(n.code,{children:"Arg<T>"})," matcher automatically captures the values it sees:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var nameArg = Arg.Any<string>();\nmock.Setup.Greet(nameArg).Returns("Hi");\n\nsvc.Greet("Alice");\nsvc.Greet("Bob");\nsvc.Greet("Charlie");\n\n// Access captured values\nvar all = nameArg.Values;   // ["Alice", "Bob", "Charlie"]\nvar last = nameArg.Latest;  // "Charlie"\n\nawait Assert.That(nameArg.Values).HasCount().EqualTo(3);\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Capture works in both setup and verification contexts. Store the ",(0,r.jsx)(n.code,{children:"Arg<T>"})," in a variable, then inspect ",(0,r.jsx)(n.code,{children:".Values"})," or ",(0,r.jsx)(n.code,{children:".Latest"})," after exercising the code."]})}),"\n",(0,r.jsx)(n.h2,{id:"custom-matchers",children:"Custom Matchers"}),"\n",(0,r.jsxs)(n.p,{children:["Implement ",(0,r.jsx)(n.code,{children:"IArgumentMatcher<T>"})," for reusable matching logic:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'public class StringLengthMatcher : IArgumentMatcher<string>\n{\n    private readonly int _min;\n    private readonly int _max;\n\n    public StringLengthMatcher(int min, int max)\n    {\n        _min = min;\n        _max = max;\n    }\n\n    public bool Matches(string? value)\n        => value is not null && value.Length >= _min && value.Length <= _max;\n\n    public bool Matches(object? value)\n        => Matches(value as string);\n\n    public string Describe()\n        => $"string with length between {_min} and {_max}";\n}\n\n// Usage\nmock.Setup.Greet(Arg.Matches(new StringLengthMatcher(3, 50)))\n    .Returns("Valid name");\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Describe()"})," method is used in verification failure messages to explain what was expected."]})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>a});var t=s(96540);const r={},c=t.createContext(r);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);