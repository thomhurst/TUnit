"use strict";(globalThis.webpackChunktunit_docs_site=globalThis.webpackChunktunit_docs_site||[]).push([[5845],{17926(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>g});const i=JSON.parse('{"id":"test-authoring/mocking/logging","title":"Logging","description":"TUnit.Mocks.Logging provides MockLogger \u2014 a simple ILogger implementation that captures log entries for inspection and verification.","source":"@site/docs/test-authoring/mocking/logging.md","sourceDirName":"test-authoring/mocking","slug":"/test-authoring/mocking/logging","permalink":"/docs/test-authoring/mocking/logging","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docs","previous":{"title":"HTTP Mocking","permalink":"/docs/test-authoring/mocking/http"},"next":{"title":"Generic Attributes","permalink":"/docs/test-authoring/generic-attributes"}}');var t=r(74848),s=r(28453);const o={sidebar_position:7},l="Logging",a={},g=[{value:"Getting Started",id:"getting-started",level:2},{value:"Creating a Logger",id:"creating-a-logger",level:2},{value:"Inspecting Entries",id:"inspecting-entries",level:2},{value:"Verification",id:"verification",level:2},{value:"Fluent API",id:"fluent-api",level:3},{value:"Shorthand Methods",id:"shorthand-methods",level:3},{value:"Never Called",id:"never-called",level:3},{value:"Filtering Entries",id:"filtering-entries",level:2},{value:"Reset",id:"reset",level:2},{value:"Dependency Injection",id:"dependency-injection",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"logging",children:"Logging"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"TUnit.Mocks.Logging"})," provides ",(0,t.jsx)(n.code,{children:"MockLogger"})," \u2014 a simple ",(0,t.jsx)(n.code,{children:"ILogger"})," implementation that captures log entries for inspection and verification."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dotnet add package TUnit.Mocks.Logging --prerelease\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"No Source Generation Needed",type:"tip",children:(0,t.jsxs)(n.p,{children:["Unlike ",(0,t.jsx)(n.code,{children:"TUnit.Mocks"}),", the logging helpers are plain classes \u2014 no source generation required. Create loggers with ",(0,t.jsx)(n.code,{children:"Mock.Logger()"})," and pass them to your code."]})}),"\n",(0,t.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using TUnit.Mocks;\nusing Microsoft.Extensions.Logging;\n\n[Test]\npublic async Task Service_Logs_On_Startup()\n{\n    // Arrange\n    var logger = Mock.Logger();\n    var service = new MyService(logger);\n\n    // Act\n    service.Start();\n\n    // Assert\n    logger.VerifyLog(LogLevel.Information, "started", Times.Once);\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-logger",children:"Creating a Logger"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// Untyped logger\nvar logger = Mock.Logger();\nILogger iLogger = logger;\n\n// With category name\nvar logger = Mock.Logger("MyApp.Services");\n\n// Generic typed logger (implements ILogger<T>)\nvar logger = Mock.Logger<MyService>();\nILogger<MyService> iLogger = logger;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"inspecting-entries",children:"Inspecting Entries"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'logger.LogInformation("User {UserId} logged in", 42);\nlogger.LogWarning("Disk space low");\n\n// All entries\nawait Assert.That(logger.Entries).HasCount().EqualTo(2);\nawait Assert.That(logger.Entries[0].LogLevel).IsEqualTo(LogLevel.Information);\nawait Assert.That(logger.Entries[0].Message).Contains("42");\n\n// Most recent entry\nvar latest = logger.LatestEntry;\nawait Assert.That(latest!.Message).IsEqualTo("Disk space low");\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Each ",(0,t.jsx)(n.code,{children:"LogEntry"})," provides:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Property"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LogLevel"})}),(0,t.jsx)(n.td,{children:"The log level (Trace, Debug, Information, etc.)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"EventId"})}),(0,t.jsx)(n.td,{children:"The event ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Message"})}),(0,t.jsx)(n.td,{children:"The formatted log message"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Exception"})}),(0,t.jsx)(n.td,{children:"The associated exception (or null)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Timestamp"})}),(0,t.jsx)(n.td,{children:"When the entry was recorded"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CategoryName"})}),(0,t.jsx)(n.td,{children:"The logger's category name"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,t.jsx)(n.h3,{id:"fluent-api",children:"Fluent API"}),"\n",(0,t.jsx)(n.p,{children:"Build verification queries with filters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// By level\nlogger.VerifyLog().AtLevel(LogLevel.Error).WasCalled(Times.Once);\n\n// By message content (contains)\nlogger.VerifyLog().ContainingMessage("failed").WasCalled(Times.Once);\n\n// By exact message\nlogger.VerifyLog().WithMessage("Operation completed").WasCalled(Times.Once);\n\n// By exception type\nlogger.VerifyLog().WithException<InvalidOperationException>().WasCalled(Times.Once);\n\n// Combined filters\nlogger.VerifyLog()\n    .AtLevel(LogLevel.Error)\n    .WithException<InvalidOperationException>()\n    .ContainingMessage("database")\n    .WasCalled(Times.Once);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"shorthand-methods",children:"Shorthand Methods"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// Verify message at level (at least once)\nlogger.VerifyLog(LogLevel.Error, "connection failed");\n\n// Verify message at level with count\nlogger.VerifyLog(LogLevel.Warning, "retry", Times.Exactly(3));\n\n// Verify nothing logged at a level\nlogger.VerifyNoLog(LogLevel.Error);\n\n// Verify nothing logged at all\nlogger.VerifyNoLogs();\n'})}),"\n",(0,t.jsx)(n.h3,{id:"never-called",children:"Never Called"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"logger.VerifyLog().AtLevel(LogLevel.Error).WasNeverCalled();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"filtering-entries",children:"Filtering Entries"}),"\n",(0,t.jsx)(n.p,{children:"Retrieve entries matching specific criteria:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'// By level\nvar errors = logger.GetLogs(LogLevel.Error);\n\n// By message content\nvar retryLogs = logger.GetLogs("retry");\n\n// Using the fluent API\nvar matching = logger.VerifyLog()\n    .AtLevel(LogLevel.Warning)\n    .ContainingMessage("timeout")\n    .GetMatchingEntries();\n'})}),"\n",(0,t.jsx)(n.h2,{id:"reset",children:"Reset"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"logger.Clear(); // removes all captured entries\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dependency-injection",children:"Dependency Injection"}),"\n",(0,t.jsxs)(n.p,{children:["Pass ",(0,t.jsx)(n.code,{children:"Mock.Logger<T>()"})," anywhere ",(0,t.jsx)(n.code,{children:"ILogger<T>"})," is expected:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'[Test]\npublic async Task OrderService_Logs_Errors()\n{\n    var logger = Mock.Logger<OrderService>();\n    var service = new OrderService(logger);\n\n    await service.ProcessOrder(invalidOrder);\n\n    logger.VerifyLog()\n        .AtLevel(LogLevel.Error)\n        .ContainingMessage("validation failed")\n        .WasCalled(Times.Once);\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,n,r){r.d(n,{R:()=>o,x:()=>l});var i=r(96540);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);