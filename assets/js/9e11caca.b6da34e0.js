"use strict";(globalThis.webpackChunktunit_docs_site=globalThis.webpackChunktunit_docs_site||[]).push([[9191],{58789(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"examples/fscheck","title":"FsCheck (Property-Based Testing)","description":"FsCheck is a property-based testing framework for .NET. Property-based testing generates random test data to verify that properties (invariants) hold true across many inputs.","source":"@site/docs/examples/fscheck.md","sourceDirName":"examples","slug":"/examples/fscheck","permalink":"/docs/examples/fscheck","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"OpenTelemetry Tracing","permalink":"/docs/examples/opentelemetry"},"next":{"title":"Complex Test Infrastructure Orchestration","permalink":"/docs/examples/complex-test-infrastructure"}}');var s=r(74848),i=r(28453);const a={},c="FsCheck (Property-Based Testing)",o={},l=[{value:"Installation",id:"installation",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Return Types",id:"return-types",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Example with Configuration",id:"example-with-configuration",level:3},{value:"Reproducing Failures",id:"reproducing-failures",level:2},{value:"Custom Generators",id:"custom-generators",level:2},{value:"Alternative: Using Gen.Choose",id:"alternative-using-genchoose",level:3},{value:"Custom types",id:"custom-types",level:3},{value:"Limitations",id:"limitations",level:2},{value:"When to Use Property-Based Testing",id:"when-to-use-property-based-testing",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"fscheck-property-based-testing",children:"FsCheck (Property-Based Testing)"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://fscheck.github.io/FsCheck/",children:"FsCheck"})," is a property-based testing framework for .NET. Property-based testing generates random test data to verify that properties (invariants) hold true across many inputs."]}),"\n",(0,s.jsxs)(n.p,{children:["There is a NuGet package to help integrate FsCheck with TUnit: ",(0,s.jsx)(n.code,{children:"TUnit.FsCheck"})]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package TUnit.FsCheck\n"})}),"\n",(0,s.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"[Test, FsCheckProperty]"})," attributes together to create a property-based test:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"using TUnit.FsCheck;\n\npublic class PropertyTests\n{\n    [Test, FsCheckProperty]\n    public bool ReverseReverseIsOriginal(int[] array)\n    {\n        var reversed = array.Reverse().Reverse().ToArray();\n        return array.SequenceEqual(reversed);\n    }\n\n    [Test, FsCheckProperty]\n    public bool AdditionIsCommutative(int a, int b)\n    {\n        return a + b == b + a;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"return-types",children:"Return Types"}),"\n",(0,s.jsx)(n.p,{children:"Property tests can return:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"bool"})})," - The test passes if the property returns ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"void"})})," - The test passes if no exception is thrown"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"Task"})," / ",(0,s.jsx)(n.code,{children:"ValueTask"})]})," - For async properties"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Property"})})," - For advanced FsCheck properties with custom generators"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Boolean property\n[Test, FsCheckProperty]\npublic bool StringConcatLength(string a, string b)\n{\n    if (a == null || b == null) return true; // Skip null cases\n    return (a + b).Length == a.Length + b.Length;\n}\n\n// Void property (throws on failure)\n[Test, FsCheckProperty]\npublic void MultiplicationByZeroIsZero(int value)\n{\n    if (value * 0 != 0)\n        throw new InvalidOperationException("Expected zero");\n}\n\n// Async property\n[Test, FsCheckProperty]\npublic async Task AsyncPropertyTest(int value)\n{\n    await Task.Delay(1);\n    if (value * 0 != 0)\n        throw new InvalidOperationException("Expected zero");\n}\n\n// FsCheck Property type for advanced scenarios\n[Test, FsCheckProperty]\npublic Property StringReversalProperty()\n{\n    return Prop.ForAll<string>(str =>\n    {\n        var reversed = new string(str.Reverse().ToArray());\n        var doubleReversed = new string(reversed.Reverse().ToArray());\n        return str == doubleReversed;\n    });\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"[FsCheckProperty]"})," attribute supports several configuration options:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MaxTest"})}),(0,s.jsx)(n.td,{children:"100"}),(0,s.jsx)(n.td,{children:"Maximum number of tests to run"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MaxFail"})}),(0,s.jsx)(n.td,{children:"1000"}),(0,s.jsx)(n.td,{children:"Maximum rejected tests before failing"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"StartSize"})}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"Starting size for test generation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"EndSize"})}),(0,s.jsx)(n.td,{children:"100"}),(0,s.jsx)(n.td,{children:"Ending size for test generation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Replay"})}),(0,s.jsx)(n.td,{children:"null"}),(0,s.jsx)(n.td,{children:"Seed to replay a specific test run"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Verbose"})}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Output all generated arguments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"QuietOnSuccess"})}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Suppress output on passing tests"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Arbitrary"})}),(0,s.jsx)(n.td,{children:"null"}),(0,s.jsx)(n.td,{children:"Types containing custom Arbitrary instances"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example-with-configuration",children:"Example with Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[Test, FsCheckProperty(MaxTest = 50, StartSize = 1, EndSize = 50)]\npublic bool ListConcatenationPreservesElements(int[] first, int[] second)\n{\n    var combined = first.Concat(second).ToArray();\n    return combined.Length == first.Length + second.Length;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"reproducing-failures",children:"Reproducing Failures"}),"\n",(0,s.jsxs)(n.p,{children:["When a property test fails, FsCheck reports the seed that can be used to reproduce the failure. Use the ",(0,s.jsx)(n.code,{children:"Replay"})," property to run the test with a specific seed:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'[Test, FsCheckProperty(Replay = "12345,67890")]\npublic bool MyProperty(int value)\n{\n    return value >= 0; // Will reproduce the same failing case\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"custom-generators",children:"Custom Generators"}),"\n",(0,s.jsxs)(n.p,{children:["You can provide custom ",(0,s.jsx)(n.code,{children:"Arbitrary"})," implementations for generating test data. FsCheck 3.x uses ",(0,s.jsx)(n.code,{children:"ArbMap.Default"})," to access default arbitraries:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"using FsCheck;\nusing FsCheck.Fluent;\n\npublic class PositiveIntArbitrary\n{\n    public static Arbitrary<int> PositiveInt()\n    {\n        // Use ArbMap.Default to get a generator for a type,\n        // then filter with Where() and convert to Arbitrary\n        return ArbMap.Default.GeneratorFor<int>()\n            .Where(x => x > 0)\n            .ToArbitrary();\n    }\n}\n\n[Test, FsCheckProperty(Arbitrary = new[] { typeof(PositiveIntArbitrary) })]\npublic bool PositiveNumbersArePositive(int value)\n{\n    return value > 0;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"alternative-using-genchoose",children:"Alternative: Using Gen.Choose"}),"\n",(0,s.jsxs)(n.p,{children:["For simple ranges, use ",(0,s.jsx)(n.code,{children:"Gen.Choose"})," directly:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class PositiveIntArbitrary\n{\n    public static Arbitrary<int> PositiveInt()\n    {\n        // Generate integers in a specific range\n        return Gen.Choose(1, int.MaxValue).ToArbitrary();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"custom-types",children:"Custom types"}),"\n",(0,s.jsx)(n.p,{children:"For custom types, compose generators using LINQ:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class Person\n{\n    public string Name { get; set; }\n    public int Age { get; set; }\n}\n\npublic class PersonArbitrary\n{\n    public static Arbitrary<Person> Person()\n    {\n        var gen = from name in ArbMap.Default.GeneratorFor<string>()\n                  from age in Gen.Choose(0, 120)\n                  select new Person { Name = name, Age = age };\n        return gen.ToArbitrary();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Native AOT"}),": TUnit.FsCheck is not compatible with Native AOT publishing because FsCheck requires reflection and dynamic code generation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter count"}),": Properties can have any number of parameters that FsCheck can generate"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-property-based-testing",children:"When to Use Property-Based Testing"}),"\n",(0,s.jsx)(n.p,{children:"Property-based testing is particularly useful for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Testing mathematical properties (commutativity, associativity, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Serialization/deserialization round-trips"}),"\n",(0,s.jsx)(n.li,{children:"Data structure invariants"}),"\n",(0,s.jsx)(n.li,{children:"Parsing and formatting functions"}),"\n",(0,s.jsx)(n.li,{children:"Any code where you can express general rules that should always hold"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453(e,n,r){r.d(n,{R:()=>a,x:()=>c});var t=r(96540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);