"use strict";(self.webpackChunktunit_docs_site=self.webpackChunktunit_docs_site||[]).push([[9013],{7309:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"troubleshooting","title":"Troubleshooting & FAQ","description":"This guide covers common questions and issues you might encounter when using TUnit.","source":"@site/docs/troubleshooting.md","sourceDirName":".","slug":"/troubleshooting","permalink":"/docs/troubleshooting","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"File based C# application","permalink":"/docs/examples/filebased-csharp"},"next":{"title":"Executors","permalink":"/docs/execution/executors"}}');var i=s(4848),r=s(8453);const l={},a="Troubleshooting & FAQ",o={},c=[{value:"Frequently Asked Questions",id:"frequently-asked-questions",level:2},{value:"Why do I have to await all assertions? Can I use synchronous assertions?",id:"why-do-i-have-to-await-all-assertions-can-i-use-synchronous-assertions",level:3},{value:"Does TUnit work with Coverlet for code coverage?",id:"does-tunit-work-with-coverlet-for-code-coverage",level:3},{value:"What code coverage tool should I use with TUnit?",id:"what-code-coverage-tool-should-i-use-with-tunit",level:3},{value:"Common Problems &amp; Solutions",id:"common-problems--solutions",level:2},{value:"Test Discovery Issues",id:"test-discovery-issues",level:2},{value:"Tests Not Being Discovered",id:"tests-not-being-discovered",level:3},{value:"1. Missing TUnit Package",id:"1-missing-tunit-package",level:4},{value:"2. Microsoft.NET.Test.Sdk Conflict",id:"2-microsoftnettestsdk-conflict",level:4},{value:"3. Missing Test Attribute",id:"3-missing-test-attribute",level:4},{value:"4. Non-Public Test Methods",id:"4-non-public-test-methods",level:4},{value:"5. Static Test Methods",id:"5-static-test-methods",level:4},{value:"6. Wrong OutputType in Project File",id:"6-wrong-outputtype-in-project-file",level:4},{value:"AOT Compilation Errors",id:"aot-compilation-errors",level:3},{value:"1. Enable AOT-Compatible Mode",id:"1-enable-aot-compatible-mode",level:4},{value:"2. Use AOT-Compatible Data Sources",id:"2-use-aot-compatible-data-sources",level:4},{value:"Test Execution Issues",id:"test-execution-issues",level:2},{value:"Tests Hanging or Deadlocking",id:"tests-hanging-or-deadlocking",level:3},{value:"1. Async Deadlocks",id:"1-async-deadlocks",level:4},{value:"2. Parallel Execution Conflicts",id:"2-parallel-execution-conflicts",level:4},{value:"3. Circular Dependencies",id:"3-circular-dependencies",level:4},{value:"Timeout Exceptions",id:"timeout-exceptions",level:3},{value:"1. Increase Timeout",id:"1-increase-timeout",level:4},{value:"2. Global Timeout Configuration",id:"2-global-timeout-configuration",level:4},{value:"3. Check for Infinite Loops",id:"3-check-for-infinite-loops",level:4},{value:"Assertion Failures",id:"assertion-failures",level:2},{value:"Confusing Assertion Messages",id:"confusing-assertion-messages",level:3},{value:"1. Use Descriptive Assertions",id:"1-use-descriptive-assertions",level:4},{value:"2. Multiple Assertions",id:"2-multiple-assertions",level:4},{value:"Floating Point Comparison Issues",id:"floating-point-comparison-issues",level:3},{value:"Assertion Not Awaited (Test Passes Without Checking)",id:"assertion-not-awaited-test-passes-without-checking",level:3},{value:"Array and Collection Comparison Issues",id:"array-and-collection-comparison-issues",level:3},{value:"Comparing Arrays",id:"comparing-arrays",level:4},{value:"Arrays of Complex Types",id:"arrays-of-complex-types",level:4},{value:"Arrays of Tuples (Known Limitation)",id:"arrays-of-tuples-known-limitation",level:4},{value:"Lists and Other Collections",id:"lists-and-other-collections",level:4},{value:"Assertion on Wrong Type",id:"assertion-on-wrong-type",level:3},{value:"String vs Object Assertions",id:"string-vs-object-assertions",level:4},{value:"Nullable Values",id:"nullable-values",level:4},{value:"Common Migration Pitfalls (from xUnit/NUnit/MSTest)",id:"common-migration-pitfalls-from-xunitnunitmstest",level:2},{value:"Understanding the Platform Change",id:"understanding-the-platform-change",level:3},{value:"Tests Don&#39;t Appear in IDE Test Explorer",id:"tests-dont-appear-in-ide-test-explorer",level:3},{value:"Command Line Differences",id:"command-line-differences",level:3},{value:".runsettings File Migration",id:"runsettings-file-migration",level:3},{value:"Testing with External Dependencies",id:"testing-with-external-dependencies",level:2},{value:"Database Testing",id:"database-testing",level:3},{value:"Mocking HTTP Calls and External APIs",id:"mocking-http-calls-and-external-apis",level:3},{value:"File System Testing",id:"file-system-testing",level:3},{value:"Configuration and Secrets Management",id:"configuration-and-secrets-management",level:2},{value:"Configuration File Not Found",id:"configuration-file-not-found",level:3},{value:"1. Configure CopyToOutputDirectory in .csproj",id:"1-configure-copytooutputdirectory-in-csproj",level:4},{value:"Loading IConfiguration in Tests",id:"loading-iconfiguration-in-tests",level:3},{value:"Environment-Specific Configuration",id:"environment-specific-configuration",level:3},{value:"1. Use Environment-Specific Files",id:"1-use-environment-specific-files",level:4},{value:"2. Set Environment in CI/CD",id:"2-set-environment-in-cicd",level:4},{value:"User Secrets in Tests",id:"user-secrets-in-tests",level:3},{value:"1. Initialize User Secrets (One Time)",id:"1-initialize-user-secrets-one-time",level:4},{value:"2. Add Secrets",id:"2-add-secrets",level:4},{value:"3. Load Secrets in Tests",id:"3-load-secrets-in-tests",level:4},{value:"Configuration from Environment Variables",id:"configuration-from-environment-variables",level:3},{value:"Strongly-Typed Configuration",id:"strongly-typed-configuration",level:3},{value:"Common Configuration Patterns",id:"common-configuration-patterns",level:3},{value:"Pattern 1: Shared Configuration for All Tests",id:"pattern-1-shared-configuration-for-all-tests",level:4},{value:"Pattern 2: Per-Test Configuration",id:"pattern-2-per-test-configuration",level:4},{value:"Troubleshooting Configuration Issues",id:"troubleshooting-configuration-issues",level:3},{value:"Issue: Configuration is null after loading",id:"issue-configuration-is-null-after-loading",level:4},{value:"Issue: Configuration values are wrong",id:"issue-configuration-values-are-wrong",level:4},{value:"Issue: Secrets not loading in CI/CD",id:"issue-secrets-not-loading-in-cicd",level:4},{value:"Test Filtering and Grouping Issues",id:"test-filtering-and-grouping-issues",level:2},{value:"Filter Not Selecting Expected Tests",id:"filter-not-selecting-expected-tests",level:3},{value:"Tree-Node Filter Syntax",id:"tree-node-filter-syntax",level:3},{value:"Common Filter Patterns",id:"common-filter-patterns",level:3},{value:"Run All Tests in Namespace",id:"run-all-tests-in-namespace",level:4},{value:"Run Tests by Category",id:"run-tests-by-category",level:4},{value:"Run Tests by Property",id:"run-tests-by-property",level:4},{value:"Categories Not Being Applied",id:"categories-not-being-applied",level:3},{value:"1. Category Attribute on Class vs Method",id:"1-category-attribute-on-class-vs-method",level:4},{value:"2. Typo in Category Name",id:"2-typo-in-category-name",level:4},{value:"Combining Filters in CI/CD",id:"combining-filters-in-cicd",level:3},{value:"GitHub Actions Example",id:"github-actions-example",level:4},{value:"Azure Pipelines Example",id:"azure-pipelines-example",level:4},{value:"Excluding Tests from Runs",id:"excluding-tests-from-runs",level:3},{value:"1. Use Explicit Attribute",id:"1-use-explicit-attribute",level:4},{value:"2. Use Custom Category",id:"2-use-custom-category",level:4},{value:"Multiple Categories on Same Test",id:"multiple-categories-on-same-test",level:3},{value:"Debugging Filter Issues",id:"debugging-filter-issues",level:3},{value:"Best Practices for Test Organization",id:"best-practices-for-test-organization",level:3},{value:"Diagnosing Flaky Tests",id:"diagnosing-flaky-tests",level:2},{value:"Common Causes",id:"common-causes",level:3},{value:"1. Race Conditions in Parallel Tests",id:"1-race-conditions-in-parallel-tests",level:4},{value:"2. Un-Awaited Async Operations",id:"2-un-awaited-async-operations",level:4},{value:"3. System Time Dependencies",id:"3-system-time-dependencies",level:4},{value:"4. External Service Dependencies",id:"4-external-service-dependencies",level:4},{value:"Strategies for Reproducing Flaky Tests",id:"strategies-for-reproducing-flaky-tests",level:3},{value:"Dependency Injection Issues",id:"dependency-injection-issues",level:2},{value:"Services Not Available",id:"services-not-available",level:3},{value:"1. Ensure Services Are Registered",id:"1-ensure-services-are-registered",level:4},{value:"2. Check Service Lifetime",id:"2-check-service-lifetime",level:4},{value:"Data-Driven Test Issues",id:"data-driven-test-issues",level:2},{value:"Data Source Timeout",id:"data-source-timeout",level:3},{value:"1. Optimize Data Generation",id:"1-optimize-data-generation",level:4},{value:"2. Increase Data Source Timeout",id:"2-increase-data-source-timeout",level:4},{value:"Matrix Test Explosion",id:"matrix-test-explosion",level:3},{value:"Memory and Performance Issues",id:"memory-and-performance-issues",level:2},{value:"High Memory Usage",id:"high-memory-usage",level:3},{value:"1. Dispose Resources Properly",id:"1-dispose-resources-properly",level:4},{value:"2. Limit Parallel Execution",id:"2-limit-parallel-execution",level:4},{value:"3. Clear Test Data Between Runs",id:"3-clear-test-data-between-runs",level:4},{value:"Hook and Lifecycle Issues",id:"hook-and-lifecycle-issues",level:2},{value:"Hooks Not Executing",id:"hooks-not-executing",level:3},{value:"1. Check Hook Scope",id:"1-check-hook-scope",level:4},{value:"2. Verify Hook Order",id:"2-verify-hook-order",level:4},{value:"Async Initialization Issues",id:"async-initialization-issues",level:3},{value:"IDE Integration Issues",id:"ide-integration-issues",level:2},{value:"Visual Studio Test Explorer Issues",id:"visual-studio-test-explorer-issues",level:3},{value:"Rider Test Explorer Issues",id:"rider-test-explorer-issues",level:3},{value:"VS Code Test Explorer Issues",id:"vs-code-test-explorer-issues",level:3},{value:"Platform-Specific Issues",id:"platform-specific-issues",level:2},{value:"Linux/macOS File Path Issues",id:"linuxmacos-file-path-issues",level:3},{value:"Line Ending Issues",id:"line-ending-issues",level:3},{value:"Code Coverage Issues",id:"code-coverage-issues",level:2},{value:"Coverage Files Not Generated",id:"coverage-files-not-generated",level:3},{value:"1. Using TUnit.Engine Without Extensions",id:"1-using-tunitengine-without-extensions",level:4},{value:"2. Configuration Not Set to Release",id:"2-configuration-not-set-to-release",level:4},{value:"3. Basic Coverage Commands",id:"3-basic-coverage-commands",level:4},{value:"Coverlet Still Installed",id:"coverlet-still-installed",level:3},{value:"Missing Coverage for Some Assemblies",id:"missing-coverage-for-some-assemblies",level:3},{value:"1. Create a <code>.runsettings</code> File",id:"1-create-a-runsettings-file",level:4},{value:"2. Use the Settings File",id:"2-use-the-settings-file",level:4},{value:"Coverage Format Not Recognized by CI/CD",id:"coverage-format-not-recognized-by-cicd",level:3},{value:"1. Check Output Format",id:"1-check-output-format",level:4},{value:"2. Verify Output Location",id:"2-verify-output-location",level:4},{value:"3. Common CI/CD Configurations",id:"3-common-cicd-configurations",level:4},{value:"Coverage Percentage Seems Wrong",id:"coverage-percentage-seems-wrong",level:3},{value:"1. Exclude Test Projects",id:"1-exclude-test-projects",level:4},{value:"2. Exclude Generated Code",id:"2-exclude-generated-code",level:4},{value:"3. Include Only Production Code",id:"3-include-only-production-code",level:4},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"Enable Diagnostic Logging",id:"enable-diagnostic-logging",level:3},{value:"Attach Debugger to Test",id:"attach-debugger-to-test",level:3},{value:"Capture Test Output",id:"capture-test-output",level:3},{value:"Getting Help",id:"getting-help",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"troubleshooting--faq",children:"Troubleshooting & FAQ"})}),"\n",(0,i.jsx)(n.p,{children:"This guide covers common questions and issues you might encounter when using TUnit."}),"\n",(0,i.jsx)(n.h2,{id:"frequently-asked-questions",children:"Frequently Asked Questions"}),"\n",(0,i.jsx)(n.p,{children:"These are conceptual questions about TUnit's design and capabilities."}),"\n",(0,i.jsx)(n.h3,{id:"why-do-i-have-to-await-all-assertions-can-i-use-synchronous-assertions",children:"Why do I have to await all assertions? Can I use synchronous assertions?"}),"\n",(0,i.jsx)(n.p,{children:"All TUnit assertions must be awaited. There's no synchronous alternative."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," Test methods themselves can be either synchronous (",(0,i.jsx)(n.code,{children:"void"}),") or asynchronous (",(0,i.jsx)(n.code,{children:"async Task"}),"). However, if your test uses TUnit's assertion library (",(0,i.jsx)(n.code,{children:"Assert.That(...)"}),"), the test method ",(0,i.jsx)(n.strong,{children:"must"})," be ",(0,i.jsx)(n.code,{children:"async Task"})," because assertions return awaitable objects that must be awaited to execute. Tests without assertions can remain synchronous. See ",(0,i.jsx)(n.a,{href:"/docs/getting-started/writing-your-first-test#test-method-signatures",children:"Test Method Signatures"})," for examples."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why this design?"})}),"\n",(0,i.jsxs)(n.p,{children:["TUnit's assertion library uses the awaitable pattern (custom objects with ",(0,i.jsx)(n.code,{children:"GetAwaiter()"})," methods). This means:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Assertions don't execute until they're awaited - this is when the actual verification happens"}),"\n",(0,i.jsx)(n.li,{children:"All assertions work consistently, whether they're simple value checks or complex async operations"}),"\n",(0,i.jsx)(n.li,{children:"Custom assertions can perform async work (like database queries or HTTP calls)"}),"\n",(0,i.jsx)(n.li,{children:"No sync-over-async patterns that cause deadlocks"}),"\n",(0,i.jsx)(n.li,{children:"Assertions can be chained fluently before execution"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What this means when migrating:"})}),"\n",(0,i.jsxs)(n.p,{children:["You need to convert your tests to ",(0,i.jsx)(n.code,{children:"async Task"})," and add ",(0,i.jsx)(n.code,{children:"await"})," before assertions."]}),"\n",(0,i.jsx)(n.p,{children:"Before (xUnit/NUnit/MSTest):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic void MyTest()\n{\n    var result = Calculate(2, 3);\n    Assert.Equal(5, result);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"After (TUnit):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic async Task MyTest()\n{\n    var result = Calculate(2, 3);\n    await Assert.That(result).IsEqualTo(5);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Automated migration"})}),"\n",(0,i.jsx)(n.p,{children:"TUnit includes code fixers that handle most of this conversion for you:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For xUnit\ndotnet format analyzers --severity info --diagnostics TUXU0001\n\n# For NUnit\ndotnet format analyzers --severity info --diagnostics TUNU0001\n\n# For MSTest\ndotnet format analyzers --severity info --diagnostics TUMS0001\n"})}),"\n",(0,i.jsx)(n.p,{children:"The code fixer converts test methods to async, adds await to assertions, and updates attribute names. It handles most common cases automatically, though you may need to adjust complex scenarios manually."}),"\n",(0,i.jsx)(n.p,{children:"See the migration guides for step-by-step instructions:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/migration/xunit#automated-migration-with-code-fixers",children:"xUnit migration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/migration/nunit#automated-migration-with-code-fixers",children:"NUnit migration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/migration/mstest#automated-migration-with-code-fixers",children:"MSTest migration"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What you gain"})}),"\n",(0,i.jsx)(n.p,{children:"Async assertions enable patterns that aren't possible with synchronous assertions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\npublic async Task AsyncAssertion_Example()\n{\n    // Await async operations in assertions\n    await Assert.That(async () => await GetUserAsync(123))\n        .Throws<UserNotFoundException>();\n\n    // Chain assertions naturally\n    var user = await GetUserAsync(456);\n    await Assert.That(user.Email)\n        .IsNotNull()\n        .And.Contains("@example.com");\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Watch out for missing awaits"})}),"\n",(0,i.jsxs)(n.p,{children:["The most common mistake is forgetting ",(0,i.jsx)(n.code,{children:"await"}),". The compiler warns you, but the test will pass without actually running the assertion:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// Wrong - test passes without checking anything\nAssert.That(result).IsEqualTo(5);  // Returns an awaitable object that's never executed\n\n// Correct\nawait Assert.That(result).IsEqualTo(5);  // The await triggers the actual assertion execution\n"})}),"\n",(0,i.jsx)(n.h3,{id:"does-tunit-work-with-coverlet-for-code-coverage",children:"Does TUnit work with Coverlet for code coverage?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"No."})," Coverlet (",(0,i.jsx)(n.code,{children:"coverlet.collector"})," or ",(0,i.jsx)(n.code,{children:"coverlet.msbuild"}),") is ",(0,i.jsx)(n.strong,{children:"not compatible"})," with TUnit."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why?"})," TUnit uses the modern ",(0,i.jsx)(n.code,{children:"Microsoft.Testing.Platform"})," instead of the legacy VSTest platform. Coverlet only works with VSTest."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Use ",(0,i.jsx)(n.code,{children:"Microsoft.Testing.Extensions.CodeCoverage"})," instead, which is:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Automatically included"})," with the TUnit meta package"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Provides the same functionality as Coverlet"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Outputs Cobertura and XML formats"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Works with all major CI/CD systems"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"#code-coverage-issues",children:"Code Coverage section"})," below for usage instructions."]}),"\n",(0,i.jsx)(n.h3,{id:"what-code-coverage-tool-should-i-use-with-tunit",children:"What code coverage tool should I use with TUnit?"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.strong,{children:"Microsoft.Testing.Extensions.CodeCoverage"}),", which is:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Already included"})," with the TUnit package (no manual installation)"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Built and maintained by Microsoft"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Works seamlessly with Microsoft.Testing.Platform"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Outputs industry-standard formats (Cobertura, XML)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Compatible with all major CI/CD systems and coverage viewers"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Do not use:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u274c Coverlet (incompatible with Microsoft.Testing.Platform)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-problems--solutions",children:"Common Problems & Solutions"}),"\n",(0,i.jsx)(n.p,{children:"This section provides symptom-based troubleshooting for specific issues."}),"\n",(0,i.jsx)(n.h2,{id:"test-discovery-issues",children:"Test Discovery Issues"}),"\n",(0,i.jsx)(n.h3,{id:"tests-not-being-discovered",children:"Tests Not Being Discovered"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No tests appear in test explorer"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dotnet test"})," reports 0 tests"]}),"\n",(0,i.jsx)(n.li,{children:"IDE doesn't show test indicators"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"[Microsoft.Testing.Platform] No test found"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"0 Tests Passed, 0 Tests Failed, 0 Tests Skipped"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Causes and Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-missing-tunit-package",children:"1. Missing TUnit Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Ensure TUnit is installed --\x3e\n<PackageReference Include="TUnit" Version="*" />\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-microsoftnettestsdk-conflict",children:"2. Microsoft.NET.Test.Sdk Conflict"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Remove this package - it conflicts with TUnit --\x3e\n\x3c!-- <PackageReference Include="Microsoft.NET.Test.Sdk" /> --\x3e\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Message:"})," ",(0,i.jsx)(n.code,{children:"Program has more than one entry point defined"})]}),"\n",(0,i.jsx)(n.h4,{id:"3-missing-test-attribute",children:"3. Missing Test Attribute"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Won't be discovered\npublic void MyTest() { }\n\n// \u2705 Will be discovered\n[Test]\npublic void MyTest() { }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"4-non-public-test-methods",children:"4. Non-Public Test Methods"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Private methods won't be discovered\n[Test]\nprivate void MyTest() { }\n\n// \u2705 Public methods will be discovered\n[Test]\npublic void MyTest() { }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"5-static-test-methods",children:"5. Static Test Methods"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Static methods aren't supported\n[Test]\npublic static void MyTest() { }\n\n// \u2705 Instance methods are supported\n[Test]\npublic void MyTest() { }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"6-wrong-outputtype-in-project-file",children:"6. Wrong OutputType in Project File"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Message:"})," ",(0,i.jsx)(n.code,{children:"A fatal error occurred. The required library hostfxr.dll could not be found."})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"\x3c!-- \u274c Wrong output type --\x3e\n<OutputType>Library</OutputType>\n\n\x3c!-- \u2705 Correct output type --\x3e\n<OutputType>Exe</OutputType>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"aot-compilation-errors",children:"AOT Compilation Errors"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Build errors mentioning "trim warnings"'}),"\n",(0,i.jsx)(n.li,{children:"Runtime errors about missing metadata"}),"\n",(0,i.jsx)(n.li,{children:'"Source generator did not generate" errors'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-enable-aot-compatible-mode",children:"1. Enable AOT-Compatible Mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<PropertyGroup>\n    <IsAotCompatible>true</IsAotCompatible>\n    <EnableTrimAnalyzer>true</EnableTrimAnalyzer>\n</PropertyGroup>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-use-aot-compatible-data-sources",children:"2. Use AOT-Compatible Data Sources"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Reflection-based (may cause AOT issues)\n[MethodDataSource(typeof(DataClass), "GetData")]\n\n// \u2705 AOT-friendly generic version\n[MethodDataSource<DataClass>(nameof(DataClass.GetData))]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"test-execution-issues",children:"Test Execution Issues"}),"\n",(0,i.jsx)(n.h3,{id:"tests-hanging-or-deadlocking",children:"Tests Hanging or Deadlocking"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests never complete"}),"\n",(0,i.jsx)(n.li,{children:"IDE becomes unresponsive during test runs"}),"\n",(0,i.jsx)(n.li,{children:"Timeout errors"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Causes and Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-async-deadlocks",children:"1. Async Deadlocks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Can cause deadlock\n[Test]\npublic void BadAsyncTest()\n{\n    var result = AsyncMethod().Result; // Blocking on async\n}\n\n// \u2705 Proper async handling\n[Test]\npublic async Task GoodAsyncTest()\n{\n    var result = await AsyncMethod();\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-parallel-execution-conflicts",children:"2. Parallel Execution Conflicts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// If tests access shared resources, prevent parallel execution\n[NotInParallel("SharedResource")]\npublic class DatabaseTests\n{\n    // Tests in this class won\'t run in parallel with others\n    // that have the same constraint\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"3-circular-dependencies",children:"3. Circular Dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Circular dependency causes deadlock\n[Test, DependsOn(nameof(Test2))]\npublic void Test1() { }\n\n[Test, DependsOn(nameof(Test1))]\npublic void Test2() { }\n\n// \u2705 Linear dependencies\n[Test]\npublic void Test1() { }\n\n[Test, DependsOn(nameof(Test1))]\npublic void Test2() { }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"timeout-exceptions",children:"Timeout Exceptions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TimeoutException"})," thrown"]}),"\n",(0,i.jsx)(n.li,{children:"Tests fail after specific duration"}),"\n",(0,i.jsx)(n.li,{children:'"Test execution timed out" messages'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"System.TimeoutException: The operation has timed out"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Test execution exceeded timeout of 30000ms"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-increase-timeout",children:"1. Increase Timeout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\n[Timeout(30000)] // 30 seconds\npublic async Task LongRunningTest()\n{\n    await LongOperation();\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-global-timeout-configuration",children:"2. Global Timeout Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"dotnet test --timeout 60s\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-check-for-infinite-loops",children:"3. Check for Infinite Loops"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// Review your test logic for potential infinite loops\n[Test]\npublic async Task PotentiallyInfiniteTest()\n{\n    while (condition) // Ensure condition can become false\n    {\n        await Task.Delay(100);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"assertion-failures",children:"Assertion Failures"}),"\n",(0,i.jsx)(n.h3,{id:"confusing-assertion-messages",children:"Confusing Assertion Messages"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Assertion messages don't clearly indicate the problem"}),"\n",(0,i.jsx)(n.li,{children:"Expected vs actual values are unclear"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-use-descriptive-assertions",children:"1. Use Descriptive Assertions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Generic assertion\nawait Assert.That(result).IsTrue();\n\n// \u2705 Specific assertion with context\nawait Assert.That(user.IsActive)\n    .IsTrue()\n    .Because("User should be active after registration");\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-multiple-assertions",children:"2. Multiple Assertions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// Group related assertions for better error reporting\nusing (Assert.Multiple())\n{\n    await Assert.That(user.Name).IsEqualTo("John");\n    await Assert.That(user.Email).Contains("@");\n    await Assert.That(user.Age).IsGreaterThan(0);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"floating-point-comparison-issues",children:"Floating Point Comparison Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests fail due to floating point precision"}),"\n",(0,i.jsx)(n.li,{children:"Decimal comparisons unexpectedly fail"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Direct comparison can fail\nawait Assert.That(0.1 + 0.2).IsEqualTo(0.3);\n\n// \u2705 Use tolerance\nawait Assert.That(0.1 + 0.2).IsEqualTo(0.3).Within(0.0001);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"assertion-not-awaited-test-passes-without-checking",children:"Assertion Not Awaited (Test Passes Without Checking)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Test passes but assertion never executes"}),"\n",(0,i.jsx)(n.li,{children:"Compiler warning: \"This async method lacks 'await' operators\""}),"\n",(0,i.jsx)(n.li,{children:"Test passes when it should fail"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"CS4014: Because this call is not awaited, execution of the current method continues before the call is completed"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Root Cause:"})}),"\n",(0,i.jsxs)(n.p,{children:["Forgetting to ",(0,i.jsx)(n.code,{children:"await"})," an assertion means it returns a ",(0,i.jsx)(n.code,{children:"Task"})," that's never executed. The test completes immediately without checking anything."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic async Task BadTest()\n{\n    var result = Calculate(2, 2);\n\n    // Wrong - missing await\n    Assert.That(result).IsEqualTo(5);  // Returns Task, never awaited\n\n    // Test passes because assertion never runs\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.p,{children:"Always await assertions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic async Task GoodTest()\n{\n    var result = Calculate(2, 2);\n    await Assert.That(result).IsEqualTo(4);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Prevention:"})}),"\n",(0,i.jsx)(n.p,{children:'The compiler warns you about this (CS4014: "Because this call is not awaited..."). To catch these at build time, enable treating warnings as errors:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<PropertyGroup>\n  <TreatWarningsAsErrors>true</TreatWarningsAsErrors>\n</PropertyGroup>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"array-and-collection-comparison-issues",children:"Array and Collection Comparison Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"IsEqualTo doesn\'t work for arrays"'}),"\n",(0,i.jsx)(n.li,{children:"Arrays with same values fail equality check"}),"\n",(0,i.jsx)(n.li,{children:"Error messages about reference equality vs value equality"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Root Cause:"})}),"\n",(0,i.jsx)(n.p,{children:"Arrays use reference equality by default. You need to use collection-specific assertion methods."}),"\n",(0,i.jsx)(n.h4,{id:"comparing-arrays",children:"Comparing Arrays"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"var expected = new[] { 1, 2, 3 };\nvar actual = new[] { 1, 2, 3 };\n\n// Wrong - compares references, not values\nawait Assert.That(actual).IsEqualTo(expected);  // Fails\n\n// Correct - use IsEquivalentTo for collections\nawait Assert.That(actual).IsEquivalentTo(expected);  // Passes\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that ",(0,i.jsx)(n.code,{children:"IsEquivalentTo"})," ignores order by default. If order matters, use ",(0,i.jsx)(n.code,{children:"CollectionOrdering.Matching"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// Order doesn't matter (default)\nawait Assert.That(actual).IsEquivalentTo(expected);  // Passes even if order differs\n\n// Order must match exactly\nawait Assert.That(actual).IsEquivalentTo(expected, CollectionOrdering.Matching);\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or assert on elements individually:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"await Assert.That(actual).HasCount().EqualTo(expected.Length);\nfor (int i = 0; i < expected.Length; i++)\n{\n    await Assert.That(actual[i]).IsEqualTo(expected[i]);\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"arrays-of-complex-types",children:"Arrays of Complex Types"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var expected = new[]\n{\n    new User { Id = 1, Name = "Alice" },\n    new User { Id = 2, Name = "Bob" }\n};\n\n// May not work without custom equality implementation\nawait Assert.That(actual).IsEquivalentTo(expected);\n\n// More reliable - assert on properties\nawait Assert.That(actual).HasCount().EqualTo(2);\nawait Assert.That(actual[0].Name).IsEqualTo("Alice");\nawait Assert.That(actual[1].Name).IsEqualTo("Bob");\n\n// Or compare projected values\nawait Assert.That(actual.Select(u => u.Name))\n    .IsEquivalentTo(new[] { "Alice", "Bob" });\n'})}),"\n",(0,i.jsx)(n.h4,{id:"arrays-of-tuples-known-limitation",children:"Arrays of Tuples (Known Limitation)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var expected = new[] { (1, "a"), (2, "b") };\nvar actual = new[] { (1, "a"), (2, "b") };\n\n// Current limitation - may not work as expected\n// await Assert.That(actual).IsEquivalentTo(expected);\n\n// Workaround - assert individual elements\nawait Assert.That(actual).HasCount().EqualTo(2);\nawait Assert.That(actual[0]).IsEqualTo((1, "a"));\nawait Assert.That(actual[1]).IsEqualTo((2, "b"));\n'})}),"\n",(0,i.jsx)(n.h4,{id:"lists-and-other-collections",children:"Lists and Other Collections"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"var list = new List<int> { 1, 2, 3 };\n\n// Works for IEnumerable types\nawait Assert.That(list).IsEquivalentTo(new[] { 1, 2, 3 });\n\n// Check specific properties\nawait Assert.That(list).HasCount().EqualTo(3);\nawait Assert.That(list).Contains(2);\nawait Assert.That(list).DoesNotContain(5);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"General Approach:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"IsEquivalentTo"})," for unordered collection comparison (default)"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"IsEquivalentTo(expected, CollectionOrdering.Matching)"})," for ordered comparison"]}),"\n",(0,i.jsx)(n.li,{children:"Iterate and assert elements individually for complex ordered comparisons"}),"\n",(0,i.jsx)(n.li,{children:"Assert on key properties for complex types"}),"\n",(0,i.jsxs)(n.li,{children:["Consider implementing ",(0,i.jsx)(n.code,{children:"IEquatable<T>"})," on your types for cleaner assertions"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"assertion-on-wrong-type",children:"Assertion on Wrong Type"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Compiler error: \"Cannot convert from 'X' to 'Y'\""}),"\n",(0,i.jsx)(n.li,{children:"Assertion method not available for type"}),"\n",(0,i.jsx)(n.li,{children:"IntelliSense doesn't show expected assertions"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"string-vs-object-assertions",children:"String vs Object Assertions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'object value = "hello";\n\n// Doesn\'t compile - object doesn\'t have string-specific assertions\n// await Assert.That(value).StartsWith("h");\n\n// Cast to the correct type\nawait Assert.That((string)value).StartsWith("h");\n\n// Or check the type first\nawait Assert.That(value).IsTypeOf<string>();\nawait Assert.That((string)value).StartsWith("h");\n'})}),"\n",(0,i.jsx)(n.h4,{id:"nullable-values",children:"Nullable Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"int? nullableInt = 5;\n\n// Option 1: Check for null, then access value\nawait Assert.That(nullableInt).IsNotNull();\nawait Assert.That(nullableInt!.Value).IsEqualTo(5);\n\n// Option 2: Use HasValue pattern\nawait Assert.That(nullableInt.HasValue).IsTrue();\nawait Assert.That(nullableInt.GetValueOrDefault()).IsEqualTo(5);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-migration-pitfalls-from-xunitnunitmstest",children:"Common Migration Pitfalls (from xUnit/NUnit/MSTest)"}),"\n",(0,i.jsx)(n.p,{children:"If you're migrating from another testing framework, these are the most common issues you'll encounter."}),"\n",(0,i.jsx)(n.h3,{id:"understanding-the-platform-change",children:"Understanding the Platform Change"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"The Core Shift:"})," TUnit uses ",(0,i.jsx)(n.code,{children:"Microsoft.Testing.Platform"})," instead of the legacy ",(0,i.jsx)(n.code,{children:"VSTest"})," platform. This fundamental change affects several aspects of your testing workflow."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What This Means:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Different Test Runners"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["VSTest used ",(0,i.jsx)(n.code,{children:"vstest.console.exe"})," and ",(0,i.jsx)(n.code,{children:"Microsoft.NET.Test.Sdk"})]}),"\n",(0,i.jsxs)(n.li,{children:["TUnit uses the modern ",(0,i.jsx)(n.code,{children:"Microsoft.Testing.Platform"})]}),"\n",(0,i.jsxs)(n.li,{children:["They are ",(0,i.jsx)(n.strong,{children:"mutually exclusive"})," - you cannot use both"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Different Commands"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Old (VSTest)\ndotnet test --collect:"XPlat Code Coverage"\n\n# New (TUnit)\ndotnet run --configuration Release --coverage\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Different Package Requirements"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Old (VSTest) --\x3e\n<PackageReference Include="Microsoft.NET.Test.Sdk" Version="*" />\n<PackageReference Include="coverlet.collector" Version="*" />\n\n\x3c!-- New (TUnit) --\x3e\n<PackageReference Include="TUnit" Version="*" />\n\x3c!-- Coverage is included automatically --\x3e\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tests-dont-appear-in-ide-test-explorer",children:"Tests Don't Appear in IDE Test Explorer"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests worked in xUnit/NUnit but don't show in Visual Studio/Rider"}),"\n",(0,i.jsx)(n.li,{children:"Test Explorer is empty"}),"\n",(0,i.jsx)(n.li,{children:'"Run Test" gutter icons don\'t appear'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Root Cause:"})," IDE needs to be configured for Microsoft.Testing.Platform support."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Visual Studio:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Go to Tools > Options > Preview Features"}),"\n",(0,i.jsx)(n.li,{children:'Enable "Use testing platform server mode"'}),"\n",(0,i.jsx)(n.li,{children:"Restart Visual Studio"}),"\n",(0,i.jsx)(n.li,{children:"Rebuild your solution"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rider:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Go to Settings > Build, Execution, Deployment > Unit Testing > Testing Platform"}),"\n",(0,i.jsx)(n.li,{children:'Enable "Testing Platform support"'}),"\n",(0,i.jsx)(n.li,{children:"Restart Rider"}),"\n",(0,i.jsx)(n.li,{children:"Rebuild your solution"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"VS Code:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install C# Dev Kit extension"}),"\n",(0,i.jsx)(n.li,{children:"Go to extension settings"}),"\n",(0,i.jsx)(n.li,{children:'Enable "Dotnet > Test Window > Use Testing Platform Protocol"'}),"\n",(0,i.jsx)(n.li,{children:"Reload window"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"command-line-differences",children:"Command Line Differences"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Old Way (VSTest):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet test\ndotnet test --filter "Category=Integration"\ndotnet test --logger "trx;LogFileName=results.trx"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"New Way (TUnit):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet run\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration]"\ndotnet run -- --report-trx --report-trx-filename results.trx\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Differences:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"dotnet run"})," instead of ",(0,i.jsx)(n.code,{children:"dotnet test"})," for best experience"]}),"\n",(0,i.jsxs)(n.li,{children:["Arguments after ",(0,i.jsx)(n.code,{children:"--"})," are passed to the test application"]}),"\n",(0,i.jsx)(n.li,{children:"Filter syntax is different (tree-node based)"}),"\n",(0,i.jsx)(n.li,{children:"Reporting flags have different names"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"runsettings-file-migration",children:".runsettings File Migration"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Old (.runsettings for VSTest):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<RunConfiguration>\n  <MaxCpuCount>4</MaxCpuCount>\n  <ResultsDirectory>./TestResults</ResultsDirectory>\n</RunConfiguration>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"New (TUnit configuration):"})}),"\n",(0,i.jsxs)(n.p,{children:["TUnit uses command-line flags or programmatic configuration instead of ",(0,i.jsx)(n.code,{children:".runsettings"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Parallel execution\ndotnet run -- --parallel\n\n# Custom results directory\ndotnet run -- --results-directory ./TestResults\n"})}),"\n",(0,i.jsx)(n.p,{children:"For more complex configuration, use the programmatic API in your test setup."}),"\n",(0,i.jsx)(n.h2,{id:"testing-with-external-dependencies",children:"Testing with External Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Real-world tests often interact with databases, APIs, and file systems. Here's how to handle these effectively."}),"\n",(0,i.jsx)(n.h3,{id:"database-testing",children:"Database Testing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Strategy 1: In-Memory Providers"})}),"\n",(0,i.jsx)(n.p,{children:"Best for unit tests that need a database but don't test database-specific behavior."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class UserRepositoryTests\n{\n    private DbContext _context;\n\n    [Before(Test)]\n    public void Setup()\n    {\n        var options = new DbContextOptionsBuilder<AppDbContext>()\n            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())\n            .Options;\n\n        _context = new AppDbContext(options);\n    }\n\n    [Test]\n    public async Task CanSaveAndRetrieveUser()\n    {\n        // Arrange\n        var user = new User { Name = "Alice", Email = "alice@example.com" };\n        _context.Users.Add(user);\n        await _context.SaveChangesAsync();\n\n        // Act\n        var retrieved = await _context.Users.FirstOrDefaultAsync(u => u.Email == "alice@example.com");\n\n        // Assert\n        await Assert.That(retrieved).IsNotNull();\n        await Assert.That(retrieved!.Name).IsEqualTo("Alice");\n    }\n\n    [After(Test)]\n    public void Cleanup()\n    {\n        _context.Dispose();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Strategy 2: Test Containers (Testcontainers)"})}),"\n",(0,i.jsx)(n.p,{children:"Best for integration tests that need real database behavior."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class DatabaseIntegrationTests : IAsyncInitializer, IAsyncDisposable\n{\n    private PostgreSqlContainer _container;\n    private DbContext _context;\n\n    public async Task InitializeAsync()\n    {\n        _container = new PostgreSqlBuilder()\n            .WithDatabase("testdb")\n            .WithUsername("test")\n            .WithPassword("test")\n            .Build();\n\n        await _container.StartAsync();\n\n        var options = new DbContextOptionsBuilder<AppDbContext>()\n            .UseNpgsql(_container.GetConnectionString())\n            .Options;\n\n        _context = new AppDbContext(options);\n        await _context.Database.MigrateAsync();\n    }\n\n    [Test]\n    public async Task DatabaseTransactionTest()\n    {\n        // Test with real database\n        var user = new User { Name = "Bob" };\n        _context.Users.Add(user);\n        await _context.SaveChangesAsync();\n\n        await Assert.That(user.Id).IsGreaterThan(0);\n    }\n\n    public async ValueTask DisposeAsync()\n    {\n        _context?.Dispose();\n        if (_container != null)\n            await _container.DisposeAsync();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Strategy 3: Shared Database Fixture"})}),"\n",(0,i.jsx)(n.p,{children:"For multiple tests sharing the same database setup:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[NotInParallel("SharedDatabase")]\npublic class SharedDatabaseTests\n{\n    private static DbContext _sharedContext;\n\n    [Before(HookType.Class)]\n    public static async Task ClassSetup()\n    {\n        _sharedContext = await SetupDatabaseAsync();\n    }\n\n    [Before(HookType.Test)]\n    public async Task TestSetup()\n    {\n        // Clear data between tests\n        _sharedContext.Users.RemoveRange(_sharedContext.Users);\n        await _sharedContext.SaveChangesAsync();\n    }\n\n    [Test]\n    public async Task Test1()\n    {\n        // Use _sharedContext\n    }\n\n    [After(HookType.Class)]\n    public static async Task ClassCleanup()\n    {\n        _sharedContext?.Dispose();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"mocking-http-calls-and-external-apis",children:"Mocking HTTP Calls and External APIs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Strategy 1: Using Moq with HttpClient"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class WeatherServiceTests\n{\n    [Test]\n    public async Task GetWeather_ReturnsTemperature()\n    {\n        // Arrange\n        var mockHandler = new Mock<HttpMessageHandler>();\n        mockHandler.Protected()\n            .Setup<Task<HttpResponseMessage>>(\n                "SendAsync",\n                ItExpr.IsAny<HttpRequestMessage>(),\n                ItExpr.IsAny<CancellationToken>())\n            .ReturnsAsync(new HttpResponseMessage\n            {\n                StatusCode = HttpStatusCode.OK,\n                Content = new StringContent("{\\"temperature\\": 22.5}")\n            });\n\n        var httpClient = new HttpClient(mockHandler.Object);\n        var service = new WeatherService(httpClient);\n\n        // Act\n        var weather = await service.GetWeatherAsync("London");\n\n        // Assert\n        await Assert.That(weather.Temperature).IsEqualTo(22.5);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Strategy 2: WireMock for Integration Tests"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class ApiIntegrationTests : IAsyncInitializer, IAsyncDisposable\n{\n    private WireMockServer _mockServer;\n    private HttpClient _httpClient;\n\n    public async Task InitializeAsync()\n    {\n        _mockServer = WireMockServer.Start();\n        _httpClient = new HttpClient { BaseAddress = new Uri(_mockServer.Urls[0]) };\n\n        await Task.CompletedTask;\n    }\n\n    [Test]\n    public async Task ApiCall_HandlesSuccessResponse()\n    {\n        // Setup mock response\n        _mockServer\n            .Given(Request.Create().WithPath("/api/users").UsingGet())\n            .RespondWith(Response.Create()\n                .WithStatusCode(200)\n                .WithHeader("Content-Type", "application/json")\n                .WithBody("[{\\"id\\": 1, \\"name\\": \\"Alice\\"}]"));\n\n        // Act\n        var response = await _httpClient.GetStringAsync("/api/users");\n\n        // Assert\n        await Assert.That(response).Contains("Alice");\n    }\n\n    public async ValueTask DisposeAsync()\n    {\n        _httpClient?.Dispose();\n        _mockServer?.Stop();\n        await Task.CompletedTask;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"file-system-testing",children:"File System Testing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use Temporary Directories"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Clean Up After Tests"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use Path.Combine for Cross-Platform Compatibility"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class FileProcessorTests\n{\n    private string _testDirectory;\n\n    [Before(Test)]\n    public void Setup()\n    {\n        _testDirectory = Path.Combine(Path.GetTempPath(), Guid.NewGuid().ToString());\n        Directory.CreateDirectory(_testDirectory);\n    }\n\n    [Test]\n    public async Task ProcessFile_CreatesOutputFile()\n    {\n        // Arrange\n        var inputFile = Path.Combine(_testDirectory, "input.txt");\n        var outputFile = Path.Combine(_testDirectory, "output.txt");\n\n        await File.WriteAllTextAsync(inputFile, "test content");\n\n        var processor = new FileProcessor();\n\n        // Act\n        await processor.ProcessFileAsync(inputFile, outputFile);\n\n        // Assert\n        await Assert.That(File.Exists(outputFile)).IsTrue();\n        var content = await File.ReadAllTextAsync(outputFile);\n        await Assert.That(content).Contains("processed");\n    }\n\n    [After(Test)]\n    public void Cleanup()\n    {\n        if (Directory.Exists(_testDirectory))\n        {\n            Directory.Delete(_testDirectory, recursive: true);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Using IFileSystem Abstraction (Recommended):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// Production code uses IFileSystem interface\npublic class DocumentService\n{\n    private readonly IFileSystem _fileSystem;\n\n    public DocumentService(IFileSystem fileSystem)\n    {\n        _fileSystem = fileSystem;\n    }\n\n    public async Task SaveDocumentAsync(string path, string content)\n    {\n        await _fileSystem.File.WriteAllTextAsync(path, content);\n    }\n}\n\n// Test with mock file system\npublic class DocumentServiceTests\n{\n    [Test]\n    public async Task SaveDocument_WritesToFile()\n    {\n        // Arrange\n        var mockFileSystem = new MockFileSystem();\n        var service = new DocumentService(mockFileSystem);\n\n        // Act\n        await service.SaveDocumentAsync("/docs/test.txt", "content");\n\n        // Assert\n        await Assert.That(mockFileSystem.File.Exists("/docs/test.txt")).IsTrue();\n        var content = await mockFileSystem.File.ReadAllTextAsync("/docs/test.txt");\n        await Assert.That(content).IsEqualTo("content");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-and-secrets-management",children:"Configuration and Secrets Management"}),"\n",(0,i.jsxs)(n.p,{children:["One of the most common challenges in testing is loading configuration from ",(0,i.jsx)(n.code,{children:"appsettings.json"}),", environment variables, or user secrets."]}),"\n",(0,i.jsx)(n.h3,{id:"configuration-file-not-found",children:"Configuration File Not Found"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"FileNotFoundException: Could not find file 'appsettings.json'"})}),"\n",(0,i.jsx)(n.li,{children:"Configuration values are null or default"}),"\n",(0,i.jsx)(n.li,{children:"\"The configuration file 'appsettings.json' was not found\""}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"System.IO.FileNotFoundException: Could not find file 'C:\\...\\bin\\Debug\\net8.0\\appsettings.json'"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Root Cause:"})}),"\n",(0,i.jsxs)(n.p,{children:["Test projects run from the ",(0,i.jsx)(n.code,{children:"bin/Debug/net8.0"})," directory, but your ",(0,i.jsx)(n.code,{children:"appsettings.json"})," file is in the project root. The file isn't being copied to the output directory."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-configure-copytooutputdirectory-in-csproj",children:"1. Configure CopyToOutputDirectory in .csproj"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<ItemGroup>\n  <None Update="appsettings.json">\n    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>\n  </None>\n  <None Update="appsettings.Development.json">\n    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>\n  </None>\n</ItemGroup>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Options:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PreserveNewest"})," - Copy only if the file is newer (recommended)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Always"})," - Always copy the file (slower builds)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"loading-iconfiguration-in-tests",children:"Loading IConfiguration in Tests"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recommended Pattern:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class ConfigurationTests\n{\n    private static IConfiguration _configuration;\n\n    [Before(HookType.Class)]\n    public static void SetupConfiguration()\n    {\n        _configuration = new ConfigurationBuilder()\n            .SetBasePath(Directory.GetCurrentDirectory())\n            .AddJsonFile("appsettings.json", optional: false)\n            .AddJsonFile("appsettings.Development.json", optional: true)\n            .AddEnvironmentVariables()\n            .Build();\n    }\n\n    [Test]\n    public async Task CanLoadConfiguration()\n    {\n        var connectionString = _configuration.GetConnectionString("Default");\n        await Assert.That(connectionString).IsNotNull();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"environment-specific-configuration",children:"Environment-Specific Configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Need different settings for Development, CI, Production testing."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-use-environment-specific-files",children:"1. Use Environment-Specific Files"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Before(HookType.Class)]\npublic static void SetupConfiguration()\n{\n    var environment = Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") ?? "Development";\n\n    _configuration = new ConfigurationBuilder()\n        .SetBasePath(Directory.GetCurrentDirectory())\n        .AddJsonFile("appsettings.json", optional: false)\n        .AddJsonFile($"appsettings.{environment}.json", optional: true)\n        .AddEnvironmentVariables()\n        .Build();\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"In .csproj:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<ItemGroup>\n  <None Update="appsettings*.json">\n    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>\n  </None>\n</ItemGroup>\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-set-environment-in-cicd",children:"2. Set Environment in CI/CD"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Run tests\n  env:\n    ASPNETCORE_ENVIRONMENT: CI\n  run: dotnet run --project tests/MyProject.Tests\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Azure Pipelines:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- task: DotNetCoreCLI@2\n  env:\n    ASPNETCORE_ENVIRONMENT: CI\n  inputs:\n    command: 'run'\n    projects: 'tests/**/*.csproj'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"user-secrets-in-tests",children:"User Secrets in Tests"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Need to test with secrets (API keys, passwords) without committing them."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-initialize-user-secrets-one-time",children:"1. Initialize User Secrets (One Time)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd MyProject.Tests\ndotnet user-secrets init\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This adds a ",(0,i.jsx)(n.code,{children:"UserSecretsId"})," to your ",(0,i.jsx)(n.code,{children:".csproj"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<PropertyGroup>\n  <UserSecretsId>your-unique-guid</UserSecretsId>\n</PropertyGroup>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-add-secrets",children:"2. Add Secrets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet user-secrets set "ApiKey" "my-secret-key"\ndotnet user-secrets set "ConnectionStrings:Database" "Server=localhost;..."\n'})}),"\n",(0,i.jsx)(n.h4,{id:"3-load-secrets-in-tests",children:"3. Load Secrets in Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Before(HookType.Class)]\npublic static void SetupConfiguration()\n{\n    _configuration = new ConfigurationBuilder()\n        .SetBasePath(Directory.GetCurrentDirectory())\n        .AddJsonFile("appsettings.json", optional: false)\n        .AddUserSecrets<ConfigurationTests>() // Load user secrets\n        .AddEnvironmentVariables()\n        .Build();\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Install Package:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<PackageReference Include="Microsoft.Extensions.Configuration.UserSecrets" Version="*" />\n'})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-from-environment-variables",children:"Configuration from Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recommended for CI/CD:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Before(HookType.Class)]\npublic static void SetupConfiguration()\n{\n    _configuration = new ConfigurationBuilder()\n        .AddEnvironmentVariables("MYAPP_") // Prefix optional\n        .Build();\n}\n\n[Test]\npublic async Task UsesEnvironmentVariable()\n{\n    var apiKey = _configuration["ApiKey"]; // Reads MYAPP_ApiKey\n    await Assert.That(apiKey).IsNotNull();\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Setting Environment Variables:"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Windows (PowerShell):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'$env:MYAPP_ApiKey = "secret-key"\ndotnet run --project tests/MyProject.Tests\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Linux/macOS:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export MYAPP_ApiKey="secret-key"\ndotnet run --project tests/MyProject.Tests\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Inline:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'MYAPP_ApiKey="secret-key" dotnet run --project tests/MyProject.Tests\n'})}),"\n",(0,i.jsx)(n.h3,{id:"strongly-typed-configuration",children:"Strongly-Typed Configuration"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recommended Pattern:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// Configuration class\npublic class AppSettings\n{\n    public string ApiUrl { get; set; }\n    public int Timeout { get; set; }\n    public ConnectionStrings ConnectionStrings { get; set; }\n}\n\npublic class ConnectionStrings\n{\n    public string Default { get; set; }\n}\n\n// In tests\npublic class ConfigurationTests\n{\n    private static AppSettings _settings;\n\n    [Before(HookType.Class)]\n    public static void SetupConfiguration()\n    {\n        var config = new ConfigurationBuilder()\n            .AddJsonFile("appsettings.json")\n            .Build();\n\n        _settings = config.Get<AppSettings>();\n    }\n\n    [Test]\n    public async Task CanAccessTypedConfiguration()\n    {\n        await Assert.That(_settings.ApiUrl).IsNotNull();\n        await Assert.That(_settings.Timeout).IsGreaterThan(0);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"common-configuration-patterns",children:"Common Configuration Patterns"}),"\n",(0,i.jsx)(n.h4,{id:"pattern-1-shared-configuration-for-all-tests",children:"Pattern 1: Shared Configuration for All Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class TestBase\n{\n    protected static IConfiguration Configuration { get; private set; }\n\n    [Before(HookType.Assembly)]\n    public static void SetupSharedConfiguration()\n    {\n        Configuration = new ConfigurationBuilder()\n            .SetBasePath(Directory.GetCurrentDirectory())\n            .AddJsonFile("appsettings.json")\n            .AddEnvironmentVariables()\n            .Build();\n    }\n}\n\n// In your tests\npublic class MyTests : TestBase\n{\n    [Test]\n    public async Task UsesSharedConfiguration()\n    {\n        var value = Configuration["Setting"];\n        await Assert.That(value).IsNotNull();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"pattern-2-per-test-configuration",children:"Pattern 2: Per-Test Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public class PerTestConfigTests\n{\n    private IConfiguration _configuration;\n\n    [Before(Test)]\n    public void SetupTestConfiguration()\n    {\n        _configuration = new ConfigurationBuilder()\n            .AddInMemoryCollection(new Dictionary<string, string>\n            {\n                ["TestSetting"] = "test-value"\n            })\n            .Build();\n    }\n\n    [Test]\n    public async Task UsesTestSpecificConfiguration()\n    {\n        await Assert.That(_configuration["TestSetting"]).IsEqualTo("test-value");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting-configuration-issues",children:"Troubleshooting Configuration Issues"}),"\n",(0,i.jsx)(n.h4,{id:"issue-configuration-is-null-after-loading",children:"Issue: Configuration is null after loading"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Is the file being copied? Check ",(0,i.jsx)(n.code,{children:"bin/Debug/net8.0/"})," for ",(0,i.jsx)(n.code,{children:"appsettings.json"})]}),"\n",(0,i.jsxs)(n.li,{children:["Is the file path correct? Use ",(0,i.jsx)(n.code,{children:"SetBasePath(Directory.GetCurrentDirectory())"})]}),"\n",(0,i.jsxs)(n.li,{children:["Is the file marked as ",(0,i.jsx)(n.code,{children:"Content"})," or ",(0,i.jsx)(n.code,{children:"None"})," with ",(0,i.jsx)(n.code,{children:"CopyToOutputDirectory"}),"?"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Debug:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Before(HookType.Class)]\npublic static void SetupConfiguration()\n{\n    var currentDir = Directory.GetCurrentDirectory();\n    TestContext.Current?.WriteLine($"Current directory: {currentDir}");\n\n    var files = Directory.GetFiles(currentDir, "*.json");\n    TestContext.Current?.WriteLine($"JSON files: {string.Join(", ", files)}");\n\n    _configuration = new ConfigurationBuilder()\n        .SetBasePath(currentDir)\n        .AddJsonFile("appsettings.json", optional: false)\n        .Build();\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"issue-configuration-values-are-wrong",children:"Issue: Configuration values are wrong"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check binding:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\npublic void DebugConfiguration()\n{\n    var allConfig = _configuration.AsEnumerable();\n    foreach (var kvp in allConfig)\n    {\n        TestContext.Current?.WriteLine($"{kvp.Key} = {kvp.Value}");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"issue-secrets-not-loading-in-cicd",children:"Issue: Secrets not loading in CI/CD"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," User secrets only work locally. In CI/CD, use environment variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions\n- name: Run tests\n  env:\n    ApiKey: ${{ secrets.API_KEY }}\n  run: dotnet run --project tests/MyProject.Tests\n"})}),"\n",(0,i.jsx)(n.h2,{id:"test-filtering-and-grouping-issues",children:"Test Filtering and Grouping Issues"}),"\n",(0,i.jsx)(n.p,{children:"When you have hundreds or thousands of tests, filtering becomes critical for running the right subset."}),"\n",(0,i.jsx)(n.h3,{id:"filter-not-selecting-expected-tests",children:"Filter Not Selecting Expected Tests"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--filter"})," command selects no tests or wrong tests"]}),"\n",(0,i.jsx)(n.li,{children:"All tests run when you expected a subset"}),"\n",(0,i.jsx)(n.li,{children:"Category filters don't work"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"No tests matched the specified filter"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"0 tests discovered"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Root Cause:"})}),"\n",(0,i.jsxs)(n.p,{children:["TUnit uses a ",(0,i.jsx)(n.strong,{children:"tree-node filter syntax"}),", not the legacy VSTest filter syntax."]}),"\n",(0,i.jsx)(n.h3,{id:"tree-node-filter-syntax",children:"Tree-Node Filter Syntax"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pattern:"})," ",(0,i.jsx)(n.code,{children:"/Assembly/Namespace/Class/Method[Property=Value]"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run all tests in a specific class\ndotnet run -- --treenode-filter "/*/*/MyTestClass/*"\n\n# Run a specific test method\ndotnet run -- --treenode-filter "/*/*/MyTestClass/MyTestMethod"\n\n# Run tests with a specific category\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration]"\n\n# Run tests NOT in a category\ndotnet run -- --treenode-filter "/*/*/*/*[Category!=Performance]"\n\n# Multiple filters (OR)\ndotnet run -- --treenode-filter "/*/*/ClassA/*|/*/*/ClassB/*"\n\n# Combine filters (AND)\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration][Priority=High]"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"common-filter-patterns",children:"Common Filter Patterns"}),"\n",(0,i.jsx)(n.h4,{id:"run-all-tests-in-namespace",children:"Run All Tests in Namespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet run -- --treenode-filter "/*/MyNamespace.*/*"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"run-tests-by-category",children:"Run Tests by Category"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\n[Category("Integration")]\npublic async Task DatabaseTest() { }\n\n[Test]\n[Category("Unit")]\npublic async Task CalculationTest() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run integration tests\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration]"\n\n# Run unit tests\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Unit]"\n\n# Run everything except performance tests\ndotnet run -- --treenode-filter "/*/*/*/*[Category!=Performance]"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"run-tests-by-property",children:"Run Tests by Property"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\n[Property("Owner", "TeamA")]\npublic async Task FeatureTest() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet run -- --treenode-filter "/*/*/*/*[Owner=TeamA]"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"categories-not-being-applied",children:"Categories Not Being Applied"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Category filter returns no tests"}),"\n",(0,i.jsx)(n.li,{children:"Tests don't appear with expected category"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-category-attribute-on-class-vs-method",children:"1. Category Attribute on Class vs Method"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u2705 Category on test method\n[Test]\n[Category("Integration")]\npublic async Task MyTest() { }\n\n// \u2705 Category on class (applies to all tests in class)\n[Category("Integration")]\npublic class IntegrationTests\n{\n    [Test]\n    public async Task Test1() { }\n\n    [Test]\n    public async Task Test2() { }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-typo-in-category-name",children:"2. Typo in Category Name"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\n[Category("Intergration")] // \u274c Typo!\npublic async Task MyTest() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Won\'t find the test\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration]"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Use constants to avoid typos:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"public static class TestCategories\n{\n    public const string Integration = nameof(Integration);\n    public const string Unit = nameof(Unit);\n    public const string Performance = nameof(Performance);\n}\n\n[Test]\n[Category(TestCategories.Integration)]\npublic async Task MyTest() { }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"combining-filters-in-cicd",children:"Combining Filters in CI/CD"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Need different test suites for different CI stages."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.h4,{id:"github-actions-example",children:"GitHub Actions Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'jobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Run unit tests\n        run: dotnet run --project tests/MyProject.Tests -- --treenode-filter "/*/*/*/*[Category=Unit]"\n\n  integration-tests:\n    runs-on: ubuntu-latest\n    needs: unit-tests\n    steps:\n      - name: Run integration tests\n        run: dotnet run --project tests/MyProject.Tests -- --treenode-filter "/*/*/*/*[Category=Integration]"\n\n  smoke-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Run smoke tests only\n        run: dotnet run --project tests/MyProject.Tests -- --treenode-filter "/*/*/*/*[Category=Smoke]"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"azure-pipelines-example",children:"Azure Pipelines Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- task: DotNetCoreCLI@2\n  displayName: 'Unit Tests'\n  inputs:\n    command: 'run'\n    projects: 'tests/**/*.csproj'\n    arguments: '-- --treenode-filter \"/*/*/*/*[Category=Unit]\"'\n\n- task: DotNetCoreCLI@2\n  displayName: 'Integration Tests'\n  inputs:\n    command: 'run'\n    projects: 'tests/**/*.csproj'\n    arguments: '-- --treenode-filter \"/*/*/*/*[Category=Integration]\"'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"excluding-tests-from-runs",children:"Excluding Tests from Runs"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Some tests should never run in CI (e.g., manual tests, local-only tests)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-use-explicit-attribute",children:"1. Use Explicit Attribute"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\n[Explicit] // Won't run unless explicitly requested\npublic async Task ManualTest() { }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-use-custom-category",children:"2. Use Custom Category"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\n[Category("ManualOnly")]\npublic async Task InteractiveTest() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# CI runs everything except manual tests\ndotnet run -- --treenode-filter "/*/*/*/*[Category!=ManualOnly]"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-categories-on-same-test",children:"Multiple Categories on Same Test"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\n[Category("Integration")]\n[Category("Database")]\n[Category("Slow")]\npublic async Task ComplexTest() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run tests that are BOTH Integration AND Database\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration][Category=Database]"\n\n# Run tests that are Integration OR Unit\ndotnet run -- --treenode-filter "/*/*/*/*[Category=Integration]|/*/*/*/*[Category=Unit]"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"debugging-filter-issues",children:"Debugging Filter Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enable Diagnostic Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'dotnet run -- --treenode-filter "your-filter" --diagnostic\n'})}),"\n",(0,i.jsx)(n.p,{children:"This shows which tests are discovered and why they were included/excluded."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"List All Tests Without Running:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Use --list-tests flag if available, or run with dry-run\ndotnet run -- --help\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verify Test Discovery:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run without filter to see all tests\ndotnet run\n\n# Count tests discovered\ndotnet run | grep "Test Passed"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"best-practices-for-test-organization",children:"Best Practices for Test Organization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Use Hierarchical Categories"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'public static class TestCategories\n{\n    public const string Unit = "Unit";\n    public const string Integration = "Integration";\n\n    public static class Integration\n    {\n        public const string Database = "Integration.Database";\n        public const string Api = "Integration.Api";\n        public const string FileSystem = "Integration.FileSystem";\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Consistent Naming"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u2705 Good: Clear, consistent\n[Category("Integration")]\n[Category("Database")]\n\n// \u274c Bad: Inconsistent\n[Category("integration")] // lowercase\n[Category("DB")] // abbreviation\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Document Your Categories"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"TestCategories.md"})," in your test project:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"# Test Categories\n\n- `Unit` - Fast, isolated unit tests\n- `Integration` - Tests with external dependencies\n- `Integration.Database` - Database integration tests\n- `Integration.Api` - API integration tests\n- `Performance` - Performance/load tests (excluded from CI)\n- `Smoke` - Critical path smoke tests (run first in CI)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"diagnosing-flaky-tests",children:"Diagnosing Flaky Tests"}),"\n",(0,i.jsx)(n.p,{children:"Flaky tests pass or fail inconsistently. They're one of the most frustrating issues in test suites."}),"\n",(0,i.jsx)(n.h3,{id:"common-causes",children:"Common Causes"}),"\n",(0,i.jsx)(n.h4,{id:"1-race-conditions-in-parallel-tests",children:"1. Race Conditions in Parallel Tests"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Test passes when run alone but fails when run with other tests."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Flaky - tests modify shared state\npublic class CounterTests\n{\n    private static int _counter = 0;\n\n    [Test]\n    public async Task IncrementCounter()\n    {\n        _counter++;\n        await Assert.That(_counter).IsEqualTo(1); // Fails in parallel\n    }\n}\n\n// \u2705 Fixed - use NotInParallel or instance state\n[NotInParallel("Counter")]\npublic class CounterTests\n{\n    private int _counter = 0; // Instance variable, not static\n\n    [Test]\n    public async Task IncrementCounter()\n    {\n        _counter++;\n        await Assert.That(_counter).IsEqualTo(1); // Always passes\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-un-awaited-async-operations",children:"2. Un-Awaited Async Operations"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Test sometimes passes, sometimes times out or fails."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Flaky - not waiting for background work\n[Test]\npublic async Task ProcessData()\n{\n    var processor = new DataProcessor();\n    processor.StartBackgroundWork(); // Fire-and-forget\n\n    await Assert.That(processor.IsComplete).IsTrue(); // Race condition!\n}\n\n// \u2705 Fixed - properly await async work\n[Test]\npublic async Task ProcessData()\n{\n    var processor = new DataProcessor();\n    await processor.ProcessAsync(); // Wait for completion\n\n    await Assert.That(processor.IsComplete).IsTrue();\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-system-time-dependencies",children:"3. System Time Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Test fails at different times of day or in different time zones."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Flaky - depends on current time\n[Test]\npublic async Task IsBusinessHours()\n{\n    var service = new BusinessHoursService();\n    var result = service.IsBusinessHours(); // Uses DateTime.Now\n\n    await Assert.That(result).IsTrue(); // Fails at night!\n}\n\n// \u2705 Fixed - inject time provider\n[Test]\npublic async Task IsBusinessHours()\n{\n    var mockTime = new Mock<ITimeProvider>();\n    mockTime.Setup(t => t.Now).Returns(new DateTime(2024, 1, 15, 10, 0, 0)); // Monday 10 AM\n\n    var service = new BusinessHoursService(mockTime.Object);\n    var result = service.IsBusinessHours();\n\n    await Assert.That(result).IsTrue(); // Always passes\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"4-external-service-dependencies",children:"4. External Service Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Test fails when network is slow or service is down."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Flaky - depends on external API\n[Test]\npublic async Task FetchUserData()\n{\n    var client = new HttpClient();\n    var response = await client.GetStringAsync("https://api.example.com/users/1");\n\n    await Assert.That(response).Contains("username"); // Fails if API is down\n}\n\n// \u2705 Fixed - mock the HTTP call\n[Test]\npublic async Task FetchUserData()\n{\n    var mockHandler = new Mock<HttpMessageHandler>();\n    mockHandler.Protected()\n        .Setup<Task<HttpResponseMessage>>("SendAsync",\n            ItExpr.IsAny<HttpRequestMessage>(),\n            ItExpr.IsAny<CancellationToken>())\n        .ReturnsAsync(new HttpResponseMessage\n        {\n            Content = new StringContent("{\\"username\\": \\"alice\\"}")\n        });\n\n    var client = new HttpClient(mockHandler.Object);\n    var response = await client.GetStringAsync("https://api.example.com/users/1");\n\n    await Assert.That(response).Contains("username"); // Always passes\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"strategies-for-reproducing-flaky-tests",children:"Strategies for Reproducing Flaky Tests"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run Tests Multiple Times"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run test 100 times to expose flakiness\nfor i in {1..100}; do dotnet run -- --treenode-filter "/*/*/*/FlakyTest"; done\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run with Maximum Parallelism"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"dotnet run -- --parallel --max-parallel-threads 8\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Add Delays to Expose Race Conditions"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic async Task TestWithDelay()\n{\n    await Task.Delay(Random.Shared.Next(0, 100)); // Random delay\n    // Test logic\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enable Detailed Logging"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\npublic async Task TestWithLogging()\n{\n    TestContext.Current?.WriteLine($"Starting test at {DateTime.Now:O}");\n    // Test logic\n    TestContext.Current?.WriteLine($"Completed test at {DateTime.Now:O}");\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dependency-injection-issues",children:"Dependency Injection Issues"}),"\n",(0,i.jsx)(n.h3,{id:"services-not-available",children:"Services Not Available"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"GetRequiredService"})," throws exceptions"]}),"\n",(0,i.jsx)(n.li,{children:"Null reference exceptions in tests"}),"\n",(0,i.jsx)(n.li,{children:'"No service registered" errors'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"InvalidOperationException: No service for type 'IMyService' has been registered"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-ensure-services-are-registered",children:"1. Ensure Services Are Registered"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// In your test setup or configuration\n[Before(HookType.Assembly)]\npublic static void ConfigureServices()\n{\n    var services = new ServiceCollection();\n    services.AddSingleton<IMyService, MyService>();\n    // Register services...\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-check-service-lifetime",children:"2. Check Service Lifetime"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic void ServiceLifetimeTest()\n{\n    // Scoped services need proper scope handling\n    using var scope = ServiceProvider.CreateScope();\n    var service = scope.ServiceProvider.GetRequiredService<IScopedService>();\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"data-driven-test-issues",children:"Data-Driven Test Issues"}),"\n",(0,i.jsx)(n.h3,{id:"data-source-timeout",children:"Data Source Timeout"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"Data source timed out" errors'}),"\n",(0,i.jsx)(n.li,{children:"Tests fail before execution"}),"\n",(0,i.jsx)(n.li,{children:"Discovery phase hangs"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-optimize-data-generation",children:"1. Optimize Data Generation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Slow data generation\npublic static IEnumerable<User> GetUsers()\n{\n    return DatabaseQuery.GetAllUsers(); // Expensive operation\n}\n\n// \u2705 Lightweight data generation\npublic static IEnumerable<User> GetUsers()\n{\n    yield return new User { Id = 1, Name = "Test1" };\n    yield return new User { Id = 2, Name = "Test2" };\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-increase-data-source-timeout",children:"2. Increase Data Source Timeout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// Configure in test assembly attributes or configuration\n[assembly: DataSourceTimeout(30000)] // 30 seconds\n"})}),"\n",(0,i.jsx)(n.h3,{id:"matrix-test-explosion",children:"Matrix Test Explosion"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Thousands of test combinations generated"}),"\n",(0,i.jsx)(n.li,{children:"Test discovery takes forever"}),"\n",(0,i.jsx)(n.li,{children:"Out of memory errors"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Explosive combination\n[Test]\n[Arguments(1, 2, 3, 4, 5)]\n[Arguments("a", "b", "c", "d", "e")]\n[Arguments(true, false)]\n// Creates 5 \xd7 5 \xd7 2 = 50 combinations!\n\n// \u2705 Use specific combinations\n[Test]\n[Arguments(1, "a", true)]\n[Arguments(2, "b", false)]\n[Arguments(3, "c", true)]\n// Only 3 specific test cases\n'})}),"\n",(0,i.jsx)(n.h2,{id:"memory-and-performance-issues",children:"Memory and Performance Issues"}),"\n",(0,i.jsx)(n.h3,{id:"high-memory-usage",children:"High Memory Usage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Out of memory exceptions"}),"\n",(0,i.jsx)(n.li,{children:"Slow test execution"}),"\n",(0,i.jsx)(n.li,{children:"System becomes unresponsive"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"OutOfMemoryException: Insufficient memory to continue the execution"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-dispose-resources-properly",children:"1. Dispose Resources Properly"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic async Task ResourceIntensiveTest()\n{\n    using var largeResource = new LargeResource();\n    // Test logic\n    // Resource automatically disposed\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-limit-parallel-execution",children:"2. Limit Parallel Execution"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[ParallelLimiter<Conservative>]\npublic class MemoryIntensiveTests\n{\n    // Limit concurrent execution\n}\n\npublic class Conservative : IParallelLimit\n{\n    public int Limit => 2; // Max 2 tests in parallel\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-clear-test-data-between-runs",children:"3. Clear Test Data Between Runs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[After(HookType.Test)]\npublic void Cleanup()\n{\n    GC.Collect(); // Force garbage collection if needed\n    _testData.Clear();\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"hook-and-lifecycle-issues",children:"Hook and Lifecycle Issues"}),"\n",(0,i.jsx)(n.h3,{id:"hooks-not-executing",children:"Hooks Not Executing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Setup/cleanup code not running"}),"\n",(0,i.jsx)(n.li,{children:"Database not initialized"}),"\n",(0,i.jsx)(n.li,{children:"Resources not cleaned up"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-check-hook-scope",children:"1. Check Hook Scope"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// \u274c Instance method for class-level hook\n[Before(HookType.Class)]\npublic void ClassSetup() { } // Won't work!\n\n// \u2705 Static method for class-level hook\n[Before(HookType.Class)]\npublic static void ClassSetup() { } // Works!\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-verify-hook-order",children:"2. Verify Hook Order"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"// Hooks execute in this order:\n// 1. Assembly Before\n// 2. Class Before\n// 3. Test Before\n// 4. TEST EXECUTION\n// 5. Test After\n// 6. Class After (after all tests in class)\n// 7. Assembly After (after all tests)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"async-initialization-issues",children:"Async Initialization Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"Cannot await in constructor" errors'}),"\n",(0,i.jsx)(n.li,{children:"Resources not ready when test starts"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"public class DatabaseTests : IAsyncInitializer\n{\n    private DatabaseConnection _connection;\n\n    // Async initialization\n    public async Task InitializeAsync()\n    {\n        _connection = await DatabaseConnection.CreateAsync();\n    }\n\n    [Test]\n    public async Task TestDatabase()\n    {\n        // _connection is guaranteed to be initialized\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ide-integration-issues",children:"IDE Integration Issues"}),"\n",(0,i.jsx)(n.h3,{id:"visual-studio-test-explorer-issues",children:"Visual Studio Test Explorer Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests not showing in Test Explorer"}),"\n",(0,i.jsx)(n.li,{children:'"Run Test" option missing'}),"\n",(0,i.jsx)(n.li,{children:"Test status not updating"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enable Testing Platform Support"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tools > Options > Preview Features"}),"\n",(0,i.jsx)(n.li,{children:'Enable "Use testing platform server mode"'}),"\n",(0,i.jsx)(n.li,{children:"Restart Visual Studio"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Clean and Rebuild"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"dotnet clean\ndotnet build\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Clear Test Cache"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Close Visual Studio"}),"\n",(0,i.jsxs)(n.li,{children:["Delete ",(0,i.jsx)(n.code,{children:".vs"})," folder"]}),"\n",(0,i.jsx)(n.li,{children:"Reopen and rebuild"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rider-test-explorer-issues",children:"Rider Test Explorer Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enable Testing Platform Support"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Settings > Build, Execution, Deployment > Unit Testing > Testing Platform"}),"\n",(0,i.jsx)(n.li,{children:'Enable "Testing Platform support"'}),"\n",(0,i.jsx)(n.li,{children:"Restart Rider"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Invalidate Caches"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"File > Invalidate Caches / Restart"}),"\n",(0,i.jsx)(n.li,{children:'Choose "Invalidate and Restart"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"vs-code-test-explorer-issues",children:"VS Code Test Explorer Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Install C# Dev Kit"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure latest version is installed"}),"\n",(0,i.jsx)(n.li,{children:"Install from Extensions marketplace"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Configure Test Settings"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "dotnet.testWindow.useTestingPlatformProtocol": true\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Reload Window"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Ctrl+Shift+P > "Developer: Reload Window"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"platform-specific-issues",children:"Platform-Specific Issues"}),"\n",(0,i.jsx)(n.h3,{id:"linuxmacos-file-path-issues",children:"Linux/macOS File Path Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests fail on Linux/macOS but pass on Windows"}),"\n",(0,i.jsx)(n.li,{children:'"File not found" errors'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Windows-specific paths\nvar path = @"C:\\TestData\\file.txt";\n\n// \u2705 Cross-platform paths\nvar path = Path.Combine("TestData", "file.txt");\n'})}),"\n",(0,i.jsx)(n.h3,{id:"line-ending-issues",children:"Line Ending Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'// \u274c Hard-coded line endings\nvar expected = "Line1\\r\\nLine2";\n\n// \u2705 Platform-agnostic\nvar expected = $"Line1{Environment.NewLine}Line2";\n'})}),"\n",(0,i.jsx)(n.h2,{id:"code-coverage-issues",children:"Code Coverage Issues"}),"\n",(0,i.jsx)(n.h3,{id:"coverage-files-not-generated",children:"Coverage Files Not Generated"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No coverage files in TestResults folder"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--coverage"})," flag has no effect"]}),"\n",(0,i.jsx)(n.li,{children:"Coverage reports empty or missing"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"No coverage data collected"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Coverage tool initialization failed"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Causes and Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-using-tunitengine-without-extensions",children:"1. Using TUnit.Engine Without Extensions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- \u274c Missing coverage extension --\x3e\n<PackageReference Include="TUnit.Engine" Version="*" />\n\n\x3c!-- \u2705 Includes coverage automatically --\x3e\n<PackageReference Include="TUnit" Version="*" />\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix:"})," Use the TUnit meta package, or manually add the coverage extension if using TUnit.Engine directly:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<PackageReference Include="TUnit.Engine" Version="*" />\n<PackageReference Include="Microsoft.Testing.Extensions.CodeCoverage" Version="*" />\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-configuration-not-set-to-release",children:"2. Configuration Not Set to Release"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# It's generally better to run coverage in Release configuration\ndotnet run --configuration Release --coverage\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-basic-coverage-commands",children:"3. Basic Coverage Commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Basic usage\ndotnet run --configuration Release --coverage\n\n# With output location\ndotnet run --configuration Release --coverage --coverage-output ./coverage/\n\n# Specify format (cobertura, xml, etc.)\ndotnet run --configuration Release --coverage --coverage-output-format cobertura\n"})}),"\n",(0,i.jsx)(n.h3,{id:"coverlet-still-installed",children:"Coverlet Still Installed"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Coverage stopped working after migrating to TUnit"}),"\n",(0,i.jsx)(n.li,{children:"Conflicts between coverage tools"}),"\n",(0,i.jsx)(n.li,{children:'"Could not load file or assembly" errors related to coverage'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"System.IO.FileNotFoundException: Could not load file or assembly 'Coverlet.Core'"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Root Cause:"})," Coverlet is ",(0,i.jsx)(n.strong,{children:"not compatible"})," with TUnit because:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Coverlet requires VSTest platform"}),"\n",(0,i.jsx)(n.li,{children:"TUnit uses Microsoft.Testing.Platform"}),"\n",(0,i.jsx)(n.li,{children:"These platforms are mutually exclusive"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Remove Coverlet packages"})," from your ",(0,i.jsx)(n.code,{children:".csproj"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Remove these lines --\x3e\n<PackageReference Include="coverlet.collector" Version="*" />\n<PackageReference Include="coverlet.msbuild" Version="*" />\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ensure TUnit meta package is installed"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<PackageReference Include="TUnit" Version="*" />\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update coverage commands"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Old (VSTest + Coverlet)\ndotnet test --collect:"XPlat Code Coverage"\n\n# New (TUnit + Microsoft Coverage)\ndotnet run --configuration Release --coverage\n'})}),"\n",(0,i.jsx)(n.h3,{id:"missing-coverage-for-some-assemblies",children:"Missing Coverage for Some Assemblies"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Coverage reports show 0% for some projects"}),"\n",(0,i.jsx)(n.li,{children:"Some assemblies excluded from coverage"}),"\n",(0,i.jsx)(n.li,{children:"Unexpected gaps in coverage"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.h4,{id:"1-create-a-runsettings-file",children:["1. Create a ",(0,i.jsx)(n.code,{children:".runsettings"})," File"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- coverage.runsettings --\x3e\n<?xml version="1.0" encoding="utf-8"?>\n<RunSettings>\n  <DataCollectionRunSettings>\n    <DataCollectors>\n      <DataCollector friendlyName="Code Coverage">\n        <Configuration>\n          <CodeCoverage>\n            <ModulePaths>\n              <Include>\n                <ModulePath>.*\\.dll$</ModulePath>\n                <ModulePath>.*MyProject\\.dll$</ModulePath>\n              </Include>\n              <Exclude>\n                <ModulePath>.*tests?\\.dll$</ModulePath>\n                <ModulePath>.*TestHelpers\\.dll$</ModulePath>\n              </Exclude>\n            </ModulePaths>\n          </CodeCoverage>\n        </Configuration>\n      </DataCollector>\n    </DataCollectors>\n  </DataCollectionRunSettings>\n</RunSettings>\n'})}),"\n",(0,i.jsx)(n.h4,{id:"2-use-the-settings-file",children:"2. Use the Settings File"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"dotnet run --configuration Release --coverage --coverage-settings coverage.runsettings\n"})}),"\n",(0,i.jsx)(n.h3,{id:"coverage-format-not-recognized-by-cicd",children:"Coverage Format Not Recognized by CI/CD"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CI/CD doesn't display coverage results"}),"\n",(0,i.jsx)(n.li,{children:"Coverage upload fails"}),"\n",(0,i.jsx)(n.li,{children:'"Unsupported format" errors'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-check-output-format",children:"1. Check Output Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Default is Cobertura (widely supported)\ndotnet run --configuration Release --coverage --coverage-output-format cobertura\n\n# For Visual Studio\ndotnet run --configuration Release --coverage --coverage-output-format xml\n\n# Multiple formats\ndotnet run --configuration Release --coverage \\\n  --coverage-output-format cobertura \\\n  --coverage-output-format xml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-verify-output-location",children:"2. Verify Output Location"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Coverage files generated in TestResults by default\nls TestResults/\n\n# Expected files:\n# - coverage.cobertura.xml\n# - <guid>/coverage.xml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-common-cicd-configurations",children:"3. Common CI/CD Configurations"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Run tests with coverage\n  run: dotnet run --project tests/MyProject.Tests --configuration Release --coverage\n\n- name: Upload coverage to Codecov\n  uses: codecov/codecov-action@v3\n  with:\n    files: ./tests/MyProject.Tests/TestResults/**/coverage.cobertura.xml\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Azure Pipelines:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- task: DotNetCoreCLI@2\n  inputs:\n    command: 'run'\n    projects: 'tests/**/*.csproj'\n    arguments: '--configuration Release --coverage --coverage-output $(Agent.TempDirectory)/coverage/'\n\n- task: PublishCodeCoverageResults@2\n  inputs:\n    summaryFileLocation: '$(Agent.TempDirectory)/coverage/**/coverage.cobertura.xml'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"coverage-percentage-seems-wrong",children:"Coverage Percentage Seems Wrong"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Coverage percentage doesn't match expectations"}),"\n",(0,i.jsx)(n.li,{children:"Test code included in coverage"}),"\n",(0,i.jsx)(n.li,{children:"Dependencies inflating coverage numbers"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsx)(n.h4,{id:"1-exclude-test-projects",children:"1. Exclude Test Projects"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"\x3c!-- coverage.runsettings --\x3e\n<ModulePaths>\n  <Exclude>\n    <ModulePath>.*tests?\\.dll$</ModulePath>\n    <ModulePath>.*\\.Tests\\.dll$</ModulePath>\n  </Exclude>\n</ModulePaths>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-exclude-generated-code",children:"2. Exclude Generated Code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<ModulePaths>\n  <Exclude>\n    <ModulePath>.*\\.g\\.cs$</ModulePath>\n    <ModulePath>.*\\.Designer\\.cs$</ModulePath>\n  </Exclude>\n</ModulePaths>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-include-only-production-code",children:"3. Include Only Production Code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<ModulePaths>\n  <Include>\n    <ModulePath>.*MyCompany\\.MyProduct\\..*\\.dll$</ModulePath>\n  </Include>\n  <Exclude>\n    <ModulePath>.*tests?\\.dll$</ModulePath>\n  </Exclude>\n</ModulePaths>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-tips",children:"Debugging Tips"}),"\n",(0,i.jsx)(n.h3,{id:"enable-diagnostic-logging",children:"Enable Diagnostic Logging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Run with diagnostic output\ndotnet test --logger "console;verbosity=detailed"\n\n# Enable TUnit diagnostics\ndotnet run -- --diagnostic\n'})}),"\n",(0,i.jsx)(n.h3,{id:"attach-debugger-to-test",children:"Attach Debugger to Test"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"[Test]\npublic void DebuggableTest()\n{\n    #if DEBUG\n    Debugger.Launch(); // Prompts to attach debugger\n    #endif\n\n    // Test logic\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"capture-test-output",children:"Capture Test Output"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'[Test]\npublic async Task TestWithOutput()\n{\n    TestContext.Current?.WriteLine("Debug: Starting test");\n\n    var result = await Operation();\n\n    TestContext.Current?.WriteLine($"Debug: Result = {result}");\n\n    await Assert.That(result).IsNotNull();\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,i.jsx)(n.p,{children:"If you're still experiencing issues:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check the Documentation"}),": Review relevant sections of the TUnit documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Search Issues"}),": Check ",(0,i.jsx)(n.a,{href:"https://github.com/thomhurst/TUnit/issues",children:"GitHub Issues"})," for similar problems"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable Diagnostics"}),": Run with ",(0,i.jsx)(n.code,{children:"--diagnostic"})," flag for detailed logs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create Minimal Reproduction"}),": Isolate the issue in a small test project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Report Issue"}),": If it's a bug, report it with:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"TUnit version"}),"\n",(0,i.jsx)(n.li,{children:".NET version"}),"\n",(0,i.jsx)(n.li,{children:"Minimal code to reproduce"}),"\n",(0,i.jsx)(n.li,{children:"Full error messages and stack traces"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Remember to check for updates - many issues are resolved in newer versions of TUnit."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);